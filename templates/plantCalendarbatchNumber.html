<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>设置每日批数</title>
    <link rel="stylesheet" href="../static/css/bootstrap.min.css">
    <link rel="stylesheet" href="../static/css/step.css">
    <script type="text/javascript" src="../static/js/jquery-3.3.1.min.js"></script>
    <script type="text/javascript" src="../static/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../static/js/bootbox.min.js"></script>
    <script type="text/javascript" src="../static/js/bsStep.js"></script>
    <script type="text/javascript" src="../static/js/less.js"></script>
    <style>
        .step-round{
            margin-bottom: 20px;
        }
        #myAlert{
            position: absolute;
            width: 100%;
        }
    </style>
</head>
<body style="padding: 20px 0;">
    <div class="col-md-12">
        <div class="row">
            <ul class="nav nav-pills nav-justified step step-round" data-step="3">
				<li>
					<a href="/plantCalendar">工厂日历</a>
				</li>
				<li>
					<a href="/plantCalendarSafeStock">设置安全库存</a>
				</li>
				<li>
					<a href="/plantCalendarbatchNumber">设置每日生产批数</a>
				</li>
				<li>
					<a href="/calendarScheduling">日历排产</a>
				</li>
			</ul>
        </div>
        <div id="myAlert" class="alert alert-success hide">
            <strong>成功！</strong>批数设置成功！
        </div>
        <div class="panel panel-default">
            <!-- Default panel contents -->
            <div class="panel-heading">批数设置表单</div>
            <div class="panel-body">
                <form class="form-horizontal">
                    <div class="form-group">
                        <label for="PRName" class="col-sm-2 control-label">品名</label>
                        <div class="col-sm-10">
                            <select class="form-control" id="PRName">
                                {% for i in data %}
                                    <option value="{{ i['id'] }}">{{ i['text'] }}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="BatchNumS" class="col-sm-2 control-label">批数(批/每日)</label>
                        <div class="col-sm-10">
                            <input type="number" class="form-control" id="BatchNumS" placeholder="">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="Batch_quantity" class="col-sm-2 control-label">重量（kg/批）</label>
                        <div class="col-sm-10">
                            <input type="number" class="form-control" id="Batch_quantity" placeholder="">
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-offset-2 col-sm-10">
                        <button type="button" class="btn btn-default" id="save">保存</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <script>
        $(function(){
            bsStep();
            $("#save").on('click',function(){
                $.ajax({
                    url: '/SchedulingStandardCreate',
                    type: 'post',
                    data:{
                        PRName:$("#PRName").find("option:checked").html(),
                        BatchNumS:$("#BatchNumS").val(),
                        Batch_quantity:$("#Batch_quantity").val()
                    },
                    success: function (data) {
                        if(data == "OK"){
                            $("#myAlert").removeClass('hide').addClass('in')
                            setTimeout(function() {
                                $("#myAlert").removeClass('in').addClass('hide')
                            },2000)
                        }else{
                            bootbox.alert(data)
                        }
                    },
                    error:function(){
                        bootbox.alert("请求失败")
                    }
                });
            })
        })
    </script>
</body>
</html>