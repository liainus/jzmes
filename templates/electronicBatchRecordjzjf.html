<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>净肿节风批记录</title>
    <link href="../static/css/base.css" rel="stylesheet">
    <script type="text/javascript" src="../static/js/jquery-3.3.1.min.js"></script>
    <link rel="stylesheet" href="../static/css/bootstrap.min.css" crossorigin="anonymous">
    <script type="text/javascript" src="../static/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="../static/css/bootstrap-datetimepicker.min.css" crossorigin="anonymous">
    <script type="text/javascript" src="../static/js/bootstrap-datetimepicker.min.js"></script>
    <style type="text/css">
        .table .middle-center{
            vertical-align: middle;
            text-align: center;
        }
        .table .tdWidth300{
            width:300px;
        }
        .table .tdWidth250{
            width:250px;
        }
        .table .tdWidth100{
            width:100px;
        }
        .table .tdWidth150{
            width:150px;
        }
        .table .tdWidth50{
            width:50px;
        }
        .table .tdMinWidth100{
            min-width:100px;
        }
        .table .tdMinWidth50{
            min-width:50px;
        }
        .example{
            padding:15px;
        }
        .selectDateTime{
            width:120px;
        }
    </style>
    <script type="text/javascript">
        $(function(){
            $.fn.datetimepicker.dates['zh'] = {
                days:       ["星期日", "星期一", "星期二", "星期三", "星期四", "星期五", "星期六","星期日"],
                daysShort:  ["日", "一", "二", "三", "四", "五", "六","日"],
                daysMin:    ["日", "一", "二", "三", "四", "五", "六","日"],
                months:     ["一月", "二月", "三月", "四月", "五月", "六月", "七月", "八月", "九月", "十月", "十一月","十二月"],
                monthsShort:  ["一", "二", "三", "四", "五", "六", "七", "八", "九", "十", "十一", "十二"],
                meridiem:    ["上午", "下午"],
                //suffix:      ["st", "nd", "rd", "th"],
                today:       "今天"
            };
            //时间选择控件
            $('.selectDateTime,.selectTime').datetimepicker({
                language:  'zh',
                format: 'yy-mm-dd hh:ii', // 标签上可用data-date-format="hh:ii" data-link-format="hh:ii"
                autoclose: true, //选择完成自动关闭下拉框
                minuteStep:1, //分钟间隔1
            });
            //生产日期
            $('#PNameProDate,.ProDate').datetimepicker({
                language:  'zh',
                format: 'yyyy-mm-dd hh:ii',
                autoclose: true,
                minuteStep:1, //分钟间隔1
            });
            //判断hidden是否有值，有值就选中复选框
            var readycheckbox = $("#readycheckbox").val(),  //所有生产前的准备 判断操作人是否有值
                QAreadycheckbox = $("#QAreadycheckbox").val(), //所有生产前的准备 判断QA确认是否有值
                overcheckbox = $("#overcheckbox").val(), //生产结束清场 判断操作人是否有值
                QAovercheckbox = $("#QAovercheckbox").val() //生产结束清场 判断QA确认是否有值
            if(readycheckbox != ""){
                $("input[name=readycheckbox]").prop("checked",true).attr("disabled",true);
                $("#allreadycheckbox").prop("checked",true).attr("disabled",true);
            }
            if(QAreadycheckbox != ""){
                $("input[name=QAreadycheckbox]").prop("checked",true).attr("disabled",true);
            }
            if(overcheckbox != ""){
                $("input[name=overcheckbox]").prop("checked",true).attr("disabled",true);
                $("#allovercheckbox").prop("checked",true).attr("disabled",true);
            }
            if(QAovercheckbox != ""){
                $("input[name=QAovercheckbox]").prop("checked",true).attr("disabled",true);
            }

            //复选框的全选和反选
            $("#allreadycheckbox").on("click",function(){
                if (this.checked) {
                    $("input[name='readycheckbox']:checkbox").prop("checked", true);
                }else{
                    $("input[name='readycheckbox']:checkbox").prop("checked", false);
                }
            })
            $("input[name='readycheckbox']:checkbox").on("click",function(){
                if($("input[name='readycheckbox']:checkbox").length == $("input[name='readycheckbox']:checkbox:checked").length){
                    $("#allreadycheckbox").prop("checked",true)
                }else{
                    $("#allreadycheckbox").prop("checked",false)
                }
            })
            $("#allovercheckbox").on("click",function(){
                if (this.checked) {
                    $("input[name='overcheckbox']:checkbox").prop("checked", true);
                }else{
                    $("input[name='overcheckbox']:checkbox").prop("checked", false);
                }
            })
            $("input[name='overcheckbox']:checkbox").on("click",function(){
                if($("input[name='overcheckbox']:checkbox").length == $("input[name='overcheckbox']:checkbox:checked").length){
                    $("#allovercheckbox").prop("checked",true)
                }else{
                    $("#allovercheckbox").prop("checked",false)
                }
            })
            var clickNum = 1
            $("input[name=equipmentCheckbox]").click(function(){
                clickNum++
                if(clickNum == 1){
                    $(this).prop("checked",true)
                    $(this).val(1)
                }else if(clickNum == 2){
                    $(this).prop("indeterminate",true)
                    $(this).val(2)
                }else if(clickNum == 3){
                    $(this).prop("checked",false)
                    $(this).val(3)
                }else{
                    clickNum = 1
                    $(this).val(1)
                }
            })
        })
    </script>
</head>
<body>
    <div class="modal" id="loadingModal" data-backdrop="static" data-keyboard="false">
        <div style="width: 200px;height:20px; z-index: 20000; position: absolute; text-align: center; left: 50%; top: 50%;margin-left:-100px;margin-top:-10px">
            <div class="progress progress-striped active" style="margin-bottom: 0;">
                <div class="progress-bar" style="width: 100%;"></div>
            </div>
            <h5>正在加载数据...</h5>
        </div>
    </div>
    <div class="example">
        <button class="btn btn-primary" id="save">保存表单信息</button>
        <button class="btn btn-primary" id="renderPdf">导出pdf</button>
    </div>
    <div class="col-md-12" id="pdfMain" style="font-size: 14px;padding-top: 20px;background-color: #ffffff;">
        {% if session.get('title') == '挑选' %}
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <td class="middle-center">工序</td>
                        <td class="middle-center" id="PName">{{ PName }}</td>
                        <td class="middle-center">产品批号</td>
                        <td class="middle-center" id="batchID">{{ BatchID }}</td>
                        <td class="middle-center">批量</td>
                        <td class="middle-center">{{ PlanQuantity }}kg</td>
                        <td class="middle-center">生产日期</td>
                        <td class="middle-center tdWidth250"><input type="text" class="batchInput datetimepicker" id="PNameProDate" readonly></td>
                    </tr>
                </thead>
            </table>
            <!--生产前的准备-->
            <h4 class="text-center">生产前的准备</h4>
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th class="tdWidth100">时间</th>
                        <th>准备工作要求及内容</th>
                        <th><label class="checkbox-inline"><input type="checkbox" name="allreadycheckbox" id="allreadycheckbox"> 打√全选</label></th>
                        <th>操作人</th>
                        <th>复核人</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td rowspan="3" style="text-align: center"><input type="text" value="" id="startReadyDate" class="datetimepicker selectDateTime" readonly></td>
                        <td>检查工作区域是否有《清场合格证》</td>
                        <td>
                            <label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label>
                        </td>
                        <td rowspan="6" class="middle-center">
                            <input type="hidden" id="readycheckbox" value={{ dir[0]["OperationPeople_a1"] }}>
                            {% if '82' == flag %}
                                {{ dir[0]["OperationPeople_a1"] }}
                                <a href="javascript:;" class="btn btn-primary OperationConfirm" name="生产前的准备">确认</a>
                            {% endif %}
                            {% if '83' == flag %}
                                {{ dir[0]["OperationPeople_a1"] }}
                            {% endif %}
                            {% if '84' == flag %}
                                {{ dir[0]["OperationPeople_a1"] }}
                            {% endif %}
                        </td>
                        <td rowspan="6" class="middle-center">
                            {% if '82' == flag %}
                                {{ dir[0]["CheckedPeople_a1"] }}
                            {% endif %}
                            {% if '83' == flag %}
                                {% if None == dir[0]["OperationPeople_a1"] or "" == dir[0]["OperationPeople_a1"] %}
                                {% else %}
                                    {{ dir[0]["CheckedPeople_a1"] }}
                                    <a href="javascript:;" class="btn btn-primary CheckedConfirm" name="生产前的准备">确认</a>
                                {% endif %}
                            {% endif %}
                            {% if '84' == flag %}
                                {{ dir[0]["CheckedPeople_a1"] }}
                            {% endif %}
                        </td>
                    </tr>
                    <tr>
                        <td>是否清除工作区域、设备上的上一批次的物料或产品</td>
                        <td>
                            <label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label>
                        </td>
                    </tr>
                    <tr>
                        <td>检查是否已经清除上一批次物料的状态标志</td>
                        <td>
                            <label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label>
                        </td>
                    </tr>
                    <tr>
                        <td rowspan="3" style="vertical-align: bottom;text-align: center;"><input type="text" value="" id="endReadyDate" class="datetimepicker selectDateTime" readonly></td>
                        <td>检查生产设备、生产现场是否完好清洁</td>
                        <td>
                            <label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label>
                        </td>
                    </tr>
                    <tr>
                        <td>是否清除生产现场与本批产品无关的文件</td>
                        <td>
                            <label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label>
                        </td>
                    </tr>
                    <tr>
                        <td>检查设备、电器件、介质是否正常处于安全状态</td>
                        <td>
                            <label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2">QA对生产现场进行检查，合格后发放《生产许可证》</td>
                        <td>
                            <label class="checkbox-inline"><input type="checkbox" name="QAreadycheckbox"> 合格 / 不合格</label>
                        </td>
                        <td>QA确认人</td>
                        <td class="middle-center">
                            <input type="hidden" id="QAreadycheckbox" value={{ dir[0]["QAConfirmPeople_a1"] }}>
                            {% if '82' == flag %}
                                {{ dir[0]["QAConfirmPeople_a1"] }}
                            {% endif %}
                            {% if '83' == flag %}
                                {{ dir[0]["QAConfirmPeople_a1"] }}
                            {% endif %}
                            {% if '84' == flag %}
                                {% if None == dir[0]["OperationPeople_a1"] or None == dir[0]["CheckedPeople_a1"] or "" == dir[0]["OperationPeople_a1"] or "" == dir[0]["CheckedPeople_a1"] %}
                                {% else %}
                                    {{ dir[0]["QAConfirmPeople_a1"] }}
                                    <a href="javascript:;" class="btn btn-primary QAConfirm" name="生产前的准备">确认</a>
                                {% endif %}
                            {% endif %}
                        </td>
                    </tr>
                </tbody>
            </table>
            <!--备料  开始-->
            <h4 class="text-center">备料操作按SOP执行</h4>
            <table class="table table-bordered">
                <tbody>
                    <tr>
                        <td colspan="4">按批生产指令从仓库领取本批生产所用的物料</td>
                        <td>
                            <label class="checkbox-inline"><input type="checkbox" name="FilterCheckbox" id="TXFilterCheckbox1"> 是 / 否</label>
                        </td>
                        <td>操作人</td>
                        <td>复核人</td>
                    </tr>
                    <tr>
                        <td colspan="4">复核物料的品名、批号、检验单号、数量</td>
                        <td>
                            <label class="checkbox-inline"><input type="checkbox" name="FilterCheckbox" id="TXFilterCheckbox2"> 是 / 否</label>
                        </td>
                        <td class="middle-center" rowspan="3">
                            <input type="hidden" id="CollectMaterialCheckbox" value={{ dir[0]["OperationPeople_a2"] }}>
                            {% if '82' == flag %}
                                {{ dir[0]["OperationPeople_a2"] }}
                                <a href="javascript:;" class="btn btn-primary OperationConfirm" name="32" rel="1">确认</a>
                            {% endif %}
                            {% if '83' == flag %}
                                {{ dir[0]["OperationPeople_a2"] }}
                            {% endif %}
                            {% if '84' == flag %}
                                {{ dir[0]["OperationPeople_a2"] }}
                            {% endif %}
                        </td>
                        <td class="middle-center" rowspan="3">
                            {% if '82' == flag %}
                                {{ dir[0]["CheckedPeople_a2"] }}
                            {% endif %}
                            {% if '83' == flag %}
                                {% if None == dir[0]["OperationPeople_a2"] or "" == dir[0]["OperationPeople_a2"] %}
                                {% else %}
                                    {{ dir[0]["CheckedPeople_a2"] }}
                                    <a href="javascript:;" class="btn btn-primary CheckedConfirm" name="32" rel="2">确认</a>
                                {% endif %}
                            {% endif %}
                            {% if '84' == flag %}
                                {{ dir[0]["CheckedPeople_a2"] }}
                            {% endif %}
                        </td>
                    </tr>
                    <tr>
                        <td>物料名称</td>
                        <td>物料号</td>
                        <td>批号</td>
                        <td>检验单号</td>
                        <td>数量</td>
                    </tr>
                    <tr>
                        <td>肿节风</td>
                        <td>102067</td>
                        <td><input type="text" class="form-control batchInput" id="TXBLBatchid"></td>
                        <td><input type="text" class="form-control batchInput" id="TXBLOdd"></td>
                        <td><input type="text" class="form-control batchInput" id="TXBLNum"></td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-bordered">
                <tbody>
                    <tr>
                        <td>开始时间</td>
                        <td><input type="text" class="ProDate datetimepicker" id="TXBLStartDate" readonly></td>
                        <td>操作人</td>
                        <td>复核人</td>
                    </tr>
                    <tr>
                        <td>结束时间</td>
                        <td><input type="text" class="ProDate datetimepicker" id="TXBLEndDate" readonly></td>
                        <td class="middle-center">
                            <input type="hidden" id="CollectMaterialCheckbox" value={{ dir[0]["OperationPeople_a2"] }}>
                            {% if '82' == flag %}
                                {{ dir[0]["OperationPeople_a2"] }}
                                <a href="javascript:;" class="btn btn-primary OperationConfirm" name="32" rel="1">确认</a>
                            {% endif %}
                            {% if '83' == flag %}
                                {{ dir[0]["OperationPeople_a2"] }}
                            {% endif %}
                            {% if '84' == flag %}
                                {{ dir[0]["OperationPeople_a2"] }}
                            {% endif %}
                        </td>
                        <td class="middle-center">
                            {% if '82' == flag %}
                                {{ dir[0]["CheckedPeople_a2"] }}
                            {% endif %}
                            {% if '83' == flag %}
                                {% if None == dir[0]["OperationPeople_a2"] or "" == dir[0]["OperationPeople_a2"] %}
                                {% else %}
                                    {{ dir[0]["CheckedPeople_a2"] }}
                                    <a href="javascript:;" class="btn btn-primary CheckedConfirm" name="32" rel="2">确认</a>
                                {% endif %}
                            {% endif %}
                            {% if '84' == flag %}
                                {{ dir[0]["CheckedPeople_a2"] }}
                            {% endif %}
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-bordered">
                <tbody>
                    <tr>
                        <td>质量控制</td>
                        <td>是否符合要求</td>
                        <td rowspan="2">QA确认人</td>
                        <td class="middle-center" rowspan="2">
                            <input type="hidden" id="QAreadycheckbox" value={{ dir[0]["QAConfirmPeople_a1"] }}>
                            {% if '82' == flag %}
                                {{ dir[0]["QAConfirmPeople_a1"] }}
                            {% endif %}
                            {% if '83' == flag %}
                                {{ dir[0]["QAConfirmPeople_a1"] }}
                            {% endif %}
                            {% if '84' == flag %}
                                {% if None == dir[0]["OperationPeople_a1"] or None == dir[0]["CheckedPeople_a1"] or "" == dir[0]["OperationPeople_a1"] or "" == dir[0]["CheckedPeople_a1"] %}
                                {% else %}
                                    {{ dir[0]["QAConfirmPeople_a1"] }}
                                    <a href="javascript:;" class="btn btn-primary QAConfirm" name="生产前的准备">确认</a>
                                {% endif %}
                            {% endif %}
                        </td>
                    </tr>
                    <tr>
                        <td>无霉变药材，杂物或非药用部分物质不得过2%</td>
                        <td><label class="checkbox-inline"><input type="checkbox" name="FilterCheckbox" id="TXFilterCheckbox3"> 是 / 否</label></td>
                    </tr>
                    <tr>
                        <td colspan="2">生产过程是否符合安全管理规定</td>
                        <td colspan="2"><label class="checkbox-inline"><input type="checkbox" name="FilterCheckbox" id="TXFilterCheckbox4"> 是 / 否</label></td>
                    </tr>
                </tbody>
            </table>
            <!--挑选结束清场-->
            <h4 class="text-center">挑选结束清场</h4>
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th class="tdWidth100">时间</th>
                        <th>清场要求及内容</th>
                        <th><label class="checkbox-inline"><input type="checkbox" name="allovercheckbox" id="allovercheckbox"> 打√全选</label></th>
                        <th>操作人</th>
                        <th>复核人</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td rowspan="2" style="text-align: center"><input type="text" value="" id="startOverDate" class="datetimepicker selectDateTime" readonly></td>
                        <td>设备、衡器是否按照清洁SOP要求完成</td>
                        <td>
                            <label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label>
                        </td>
                        <td rowspan="4" class="middle-center">
                            <input type="hidden" id="overcheckbox" value={{ dir[0]["OperationPeople_a4"] }}>
                            {% if '82' == flag %}
                                {{ dir[0]["OperationPeople_a4"] }}
                                <a href="javascript:;" class="btn btn-primary OperationConfirm" name="备料结束清场">确认</a>
                            {% endif %}
                            {% if '83' == flag %}
                                {{ dir[0]["OperationPeople_a4"] }}
                            {% endif %}
                            {% if '84' == flag %}
                                {{ dir[0]["OperationPeople_a4"] }}
                            {% endif %}
                        </td>
                        <td rowspan="4" class="middle-center">
                            {% if '82' == flag %}
                                {{ dir[0]["CheckedPeople_a4"] }}
                            {% endif %}
                            {% if '83' == flag %}
                                {% if None == dir[0]["OperationPeople_a4"] or "" == dir[0]["OperationPeople_a4"] %}
                                {% else %}
                                    {{ dir[0]["CheckedPeople_a4"] }}
                                    <a href="javascript:;" class="btn btn-primary CheckedConfirm" name="备料结束清场">确认</a>
                                {% endif %}
                            {% endif %}
                            {% if '84' == flag %}
                                {{ dir[0]["CheckedPeople_a4"] }}
                            {% endif %}
                        </td>
                    </tr>
                    <tr>
                        <td>是否清除工作区域内本批物料、状态标志和生产用文件</td>
                        <td>
                            <label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label>
                        </td>
                    </tr>
                    <tr>
                        <td rowspan="2" style="vertical-align: bottom;text-align: center;"><input type="text" value="" id="endOverDate" class="datetimepicker selectDateTime" readonly></td>
                        <td>工作区域、工器具、洁具是否清洁并按定置摆放</td>
                        <td>
                            <label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label>
                        </td>
                    </tr>
                    <tr>
                        <td>是否按《清场管理规程》进行清场</td>
                        <td>
                            <label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2">QA对生产现场进行检查，合格后发放《清场合格证》</td>
                        <td>
                            <label class="checkbox-inline"><input type="checkbox" name="QAovercheckbox"> 合格 / 不合格</label>
                        </td>
                        <td>QA确认人</td>
                        <td class="middle-center">
                            <input type="hidden" id="QAovercheckbox" value={{ dir[0]["QAConfirmPeople_a4"] }}>
                            {% if '82' == flag %}
                                {{ dir[0]["QAConfirmPeople_a4"] }}
                            {% endif %}
                            {% if '83' == flag %}
                                {{ dir[0]["QAConfirmPeople_a4"] }}
                            {% endif %}
                            {% if '84' == flag %}
                                {% if None == dir[0]["OperationPeople_a4"] or None == dir[0]["CheckedPeople_a4"] or "" == dir[0]["OperationPeople_a4"] or "" == dir[0]["CheckedPeople_a4"] %}
                                {% else %}
                                    {{ dir[0]["QAConfirmPeople_a4"] }}
                                    <a href="javascript:;" class="btn btn-primary QAConfirm" name="备料结束清场">确认</a>
                                {% endif %}
                            {% endif %}
                        </td>
                    </tr>
                </tbody>
            </table>
            <!--挑选设备-->
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th>设备名称</th>
                        <th>设备型号</th>
                        <th>设备编号</th>
                        <th>设备运转情况</th>
                        <th>操作人</th>
                        <th>复核人</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="equipmentName">翻转式解包台</td>
                        <td>FJB-1000</td>
                        <td>22089</td>
                        <td>
                            <label class="checkbox-inline"><input type="checkbox" name="equipmentCheckbox" id="TXEquipmentCheckbox1" > 正常 </label>
                            <label class="checkbox-inline"><input type="checkbox" name="equipmentCheckbox" id="TXEquipmentUnCheckbox1"> 不正常 </label>
                        </td>
                        <td class="middle-center">
                            <input type="hidden" id="equipmentCheckbox" value={{ dir[0]["OperationPeople_a5"] }}>
                            {% if '82' == flag %}
                                {{ dir[0]["OperationPeople_a5"] }}
                                <a href="javascript:;" class="btn btn-primary equipmentConfirm" name="操作人">确认</a>
                            {% endif %}
                            {% if '83' == flag %}
                                {{ dir[0]["OperationPeople_a5"] }}
                            {% endif %}
                            {% if '84' == flag %}
                                {{ dir[0]["OperationPeople_a5"] }}
                            {% endif %}
                        </td>
                        <td class="middle-center">
                            {% if '82' == flag %}
                                {{ dir[0]["CheckedPeople_a5"] }}
                            {% endif %}
                            {% if '83' == flag %}
                                {% if None == dir[0]["OperationPeople_a5"] or "" == dir[0]["OperationPeople_a5"] %}
                                {% else %}
                                    {% if None == dir[0]["CheckedPeople_a5"] or "" == dir[0]["CheckedPeople_a5"] %}
                                        <a href="javascript:;" class="btn btn-primary equipmentConfirm" name="复核人">确认</a>
                                    {% else %}
                                        {{ dir[0]["CheckedPeople_a5"] }}
                                    {% endif %}
                                {% endif %}
                            {% endif %}
                            {% if '84' == flag %}
                                {{ dir[0]["CheckedPeople_a5"] }}
                            {% endif %}
                        </td>
                    </tr>
                </tbody>
            </table>
            <!--生产前清洁消毒-->
            <h4 class="text-center">生产前清洁消毒</h4>
            <table class="table table-bordered">
                <tbody>
                    <tr>
                        <td>上一批产品名称</td>
                        <td><input type="text" class="form-control batchInput" id=""></td>
                        <td>上一批生产批号</td>
                        <td><input type="text" class="form-control batchInput" id=""></td>
                        <td>上一批产品规格</td>
                        <td><input type="text" class="form-control batchInput" id=""></td>
                    </tr>
                    <tr>
                        <td>清洗剂名称</td>
                        <td><input type="text" class="form-control batchInput" id=""></td>
                        <td>消毒剂名称</td>
                        <td><input type="text" class="form-control batchInput" id=""></td>
                        <td>消毒剂用量</td>
                        <td><input type="text" class="form-control batchInput" id=""></td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-bordered">
                <tbody>
                    <tr>
                        <td>设备名称</td>
                        <td><input type="text" class="form-control batchInput" id=""></td>
                        <td><input type="text" class="form-control batchInput" id=""></td>
                        <td><input type="text" class="form-control batchInput" id=""></td>
                        <td><input type="text" class="form-control batchInput" id=""></td>
                    </tr>
                    <tr>
                        <td>设备编号</td>
                        <td><input type="text" class="form-control batchInput" id=""></td>
                        <td><input type="text" class="form-control batchInput" id=""></td>
                        <td><input type="text" class="form-control batchInput" id=""></td>
                        <td><input type="text" class="form-control batchInput" id=""></td>
                    </tr>
                    <tr>
                        <td>开始清场时间</td>
                        <td><input type="text" class="batchInput datetimepicker" id="" readonly></td>
                        <td><input type="text" class="batchInput datetimepicker" id="" readonly></td>
                        <td><input type="text" class="batchInput datetimepicker" id="" readonly></td>
                        <td><input type="text" class="batchInput datetimepicker" id="" readonly></td>
                    </tr>
                    <tr>
                        <td>按照操作规程清洁</td>
                        <td><label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label></td>
                        <td><label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label></td>
                        <td><label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label></td>
                        <td><label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label></td>
                    </tr>
                    <tr>
                        <td>烘干或晾干</td>
                        <td><label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label></td>
                        <td><label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label></td>
                        <td><label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label></td>
                        <td><label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label></td>
                    </tr>
                    <tr>
                        <td>将设备内的物料清除干净，不得有上批次的残留物</td>
                        <td><label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label></td>
                        <td><label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label></td>
                        <td><label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label></td>
                        <td><label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label></td>
                    </tr>
                    <tr>
                        <td>设备外表面清洁，无粉尘</td>
                        <td><label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label></td>
                        <td><label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label></td>
                        <td><label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label></td>
                        <td><label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label></td>
                    </tr>
                    <tr>
                        <td>结束时间</td>
                        <td><input type="text" class="batchInput datetimepicker" id="" readonly></td>
                        <td><input type="text" class="batchInput datetimepicker" id="" readonly></td>
                        <td><input type="text" class="batchInput datetimepicker" id="" readonly></td>
                        <td><input type="text" class="batchInput datetimepicker" id="" readonly></td>
                    </tr>
                    <tr>
                        <td>操作人</td>
                        <td class="middle-center" colspan="4">
                            <input type="hidden" id="equipmentCheckbox" value={{ dir[0]["OperationPeople_a5"] }}>
                            {% if '82' == flag %}
                                {{ dir[0]["OperationPeople_a5"] }}
                                <a href="javascript:;" class="btn btn-primary equipmentConfirm" name="操作人">确认</a>
                            {% endif %}
                            {% if '83' == flag %}
                                {{ dir[0]["OperationPeople_a5"] }}
                            {% endif %}
                            {% if '84' == flag %}
                                {{ dir[0]["OperationPeople_a5"] }}
                            {% endif %}
                        </td>
                    </tr>
                    <tr>
                        <td>复核人</td>
                        <td class="middle-center" colspan="4">
                            {% if '82' == flag %}
                                {{ dir[0]["CheckedPeople_a5"] }}
                            {% endif %}
                            {% if '83' == flag %}
                                {% if None == dir[0]["OperationPeople_a5"] or "" == dir[0]["OperationPeople_a5"] %}
                                {% else %}
                                    {% if None == dir[0]["CheckedPeople_a5"] or "" == dir[0]["CheckedPeople_a5"] %}
                                        <a href="javascript:;" class="btn btn-primary equipmentConfirm" name="复核人">确认</a>
                                    {% else %}
                                        {{ dir[0]["CheckedPeople_a5"] }}
                                    {% endif %}
                                {% endif %}
                            {% endif %}
                            {% if '84' == flag %}
                                {{ dir[0]["CheckedPeople_a5"] }}
                            {% endif %}
                        </td>
                    </tr>
                    <tr>
                        <td>QA确认人</td>
                        <td class="middle-center" colspan="4">
                            {% if '82' == flag %}
                                {{ dir[0]["QAConfirmPeople_a4"] }}
                            {% endif %}
                            {% if '83' == flag %}
                                {{ dir[0]["QAConfirmPeople_a4"] }}
                            {% endif %}
                            {% if '84' == flag %}
                                {% if None == dir[0]["OperationPeople_a4"] or None == dir[0]["CheckedPeople_a4"] or "" == dir[0]["OperationPeople_a4"] or "" == dir[0]["CheckedPeople_a4"] %}
                                {% else %}
                                    {{ dir[0]["QAConfirmPeople_a4"] }}
                                    <a href="javascript:;" class="btn btn-primary QAConfirm" name="备料结束清场">确认</a>
                                {% endif %}
                            {% endif %}
                        </td>
                    </tr>
                </tbody>
            </table>
            <!--生产结束清洁消毒-->
            <h4 class="text-center">生产结束清洁消毒</h4>
            <table class="table table-bordered">
                <tbody>
                    <tr>
                        <td>清洗剂名称</td>
                        <td><input type="text" class="form-control batchInput" id=""></td>
                        <td>消毒剂名称</td>
                        <td><input type="text" class="form-control batchInput" id=""></td>
                        <td>消毒剂用量</td>
                        <td><input type="text" class="form-control batchInput" id=""></td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-bordered">
                <tbody>
                    <tr>
                        <td>设备名称</td>
                        <td><input type="text" class="form-control batchInput" id=""></td>
                        <td><input type="text" class="form-control batchInput" id=""></td>
                        <td><input type="text" class="form-control batchInput" id=""></td>
                        <td><input type="text" class="form-control batchInput" id=""></td>
                    </tr>
                    <tr>
                        <td>设备编号</td>
                        <td><input type="text" class="form-control batchInput" id=""></td>
                        <td><input type="text" class="form-control batchInput" id=""></td>
                        <td><input type="text" class="form-control batchInput" id=""></td>
                        <td><input type="text" class="form-control batchInput" id=""></td>
                    </tr>
                    <tr>
                        <td>开始清场时间</td>
                        <td><input type="text" class="batchInput datetimepicker" id="" readonly></td>
                        <td><input type="text" class="batchInput datetimepicker" id="" readonly></td>
                        <td><input type="text" class="batchInput datetimepicker" id="" readonly></td>
                        <td><input type="text" class="batchInput datetimepicker" id="" readonly></td>
                    </tr>
                    <tr>
                        <td>按照操作规程清洁</td>
                        <td><label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label></td>
                        <td><label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label></td>
                        <td><label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label></td>
                        <td><label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label></td>
                    </tr>
                    <tr>
                        <td>烘干或晾干</td>
                        <td><label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label></td>
                        <td><label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label></td>
                        <td><label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label></td>
                        <td><label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label></td>
                    </tr>
                    <tr>
                        <td>将设备内的物料清除干净，不得有上批次的残留物</td>
                        <td><label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label></td>
                        <td><label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label></td>
                        <td><label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label></td>
                        <td><label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label></td>
                    </tr>
                    <tr>
                        <td>设备外表面清洁，无粉尘</td>
                        <td><label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label></td>
                        <td><label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label></td>
                        <td><label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label></td>
                        <td><label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label></td>
                    </tr>
                    <tr>
                        <td>结束时间</td>
                        <td><input type="text" class="batchInput datetimepicker" id="" readonly></td>
                        <td><input type="text" class="batchInput datetimepicker" id="" readonly></td>
                        <td><input type="text" class="batchInput datetimepicker" id="" readonly></td>
                        <td><input type="text" class="batchInput datetimepicker" id="" readonly></td>
                    </tr>
                    <tr>
                        <td>操作人</td>
                        <td class="middle-center" colspan="4">
                            <input type="hidden" id="equipmentCheckbox" value={{ dir[0]["OperationPeople_a5"] }}>
                            {% if '82' == flag %}
                                {{ dir[0]["OperationPeople_a5"] }}
                                <a href="javascript:;" class="btn btn-primary equipmentConfirm" name="操作人">确认</a>
                            {% endif %}
                            {% if '83' == flag %}
                                {{ dir[0]["OperationPeople_a5"] }}
                            {% endif %}
                            {% if '84' == flag %}
                                {{ dir[0]["OperationPeople_a5"] }}
                            {% endif %}
                        </td>
                    </tr>
                    <tr>
                        <td>复核人</td>
                        <td class="middle-center" colspan="4">
                            {% if '82' == flag %}
                                {{ dir[0]["CheckedPeople_a5"] }}
                            {% endif %}
                            {% if '83' == flag %}
                                {% if None == dir[0]["OperationPeople_a5"] or "" == dir[0]["OperationPeople_a5"] %}
                                {% else %}
                                    {% if None == dir[0]["CheckedPeople_a5"] or "" == dir[0]["CheckedPeople_a5"] %}
                                        <a href="javascript:;" class="btn btn-primary equipmentConfirm" name="复核人">确认</a>
                                    {% else %}
                                        {{ dir[0]["CheckedPeople_a5"] }}
                                    {% endif %}
                                {% endif %}
                            {% endif %}
                            {% if '84' == flag %}
                                {{ dir[0]["CheckedPeople_a5"] }}
                            {% endif %}
                        </td>
                    </tr>
                    <tr>
                        <td>QA确认人</td>
                        <td class="middle-center" colspan="4">
                            {% if '82' == flag %}
                                {{ dir[0]["QAConfirmPeople_a4"] }}
                            {% endif %}
                            {% if '83' == flag %}
                                {{ dir[0]["QAConfirmPeople_a4"] }}
                            {% endif %}
                            {% if '84' == flag %}
                                {% if None == dir[0]["OperationPeople_a4"] or None == dir[0]["CheckedPeople_a4"] or "" == dir[0]["OperationPeople_a4"] or "" == dir[0]["CheckedPeople_a4"] %}
                                {% else %}
                                    {{ dir[0]["QAConfirmPeople_a4"] }}
                                    <a href="javascript:;" class="btn btn-primary QAConfirm" name="备料结束清场">确认</a>
                                {% endif %}
                            {% endif %}
                        </td>
                    </tr>
                </tbody>
            </table>
        {% endif %}

        {% if session.get('title') == '洗润' %}
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <td class="middle-center">工序</td>
                        <td class="middle-center" id="PName">{{ PName }}</td>
                        <td class="middle-center">产品批号</td>
                        <td class="middle-center" id="batchID">{{ BatchID }}</td>
                        <td class="middle-center">批量</td>
                        <td class="middle-center">{{ PlanQuantity }}kg</td>
                        <td class="middle-center">生产日期</td>
                        <td class="middle-center tdWidth250"><input type="text" class="batchInput datetimepicker" id="PNameProDate" readonly></td>
                    </tr>
                </thead>
            </table>
            <!--生产前的准备-->
            <h4 class="text-center">生产前的准备</h4>
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th class="tdWidth100">时间</th>
                        <th>准备工作要求及内容</th>
                        <th><label class="checkbox-inline"><input type="checkbox" name="allreadycheckbox" id="allreadycheckbox"> 打√全选</label></th>
                        <th>操作人</th>
                        <th>复核人</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td rowspan="3" style="text-align: center"><input type="text" value="" id="startReadyDate" class="datetimepicker selectDateTime" readonly></td>
                        <td>检查工作区域是否有《清场合格证》</td>
                        <td>
                            <label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label>
                        </td>
                        <td rowspan="6" class="middle-center">
                            <input type="hidden" id="readycheckbox" value={{ dir[0]["OperationPeople_a1"] }}>
                            {% if '82' == flag %}
                                {{ dir[0]["OperationPeople_a1"] }}
                                <a href="javascript:;" class="btn btn-primary OperationConfirm" name="生产前的准备">确认</a>
                            {% endif %}
                            {% if '83' == flag %}
                                {{ dir[0]["OperationPeople_a1"] }}
                            {% endif %}
                            {% if '84' == flag %}
                                {{ dir[0]["OperationPeople_a1"] }}
                            {% endif %}
                        </td>
                        <td rowspan="6" class="middle-center">
                            {% if '82' == flag %}
                                {{ dir[0]["CheckedPeople_a1"] }}
                            {% endif %}
                            {% if '83' == flag %}
                                {% if None == dir[0]["OperationPeople_a1"] or "" == dir[0]["OperationPeople_a1"] %}
                                {% else %}
                                    {{ dir[0]["CheckedPeople_a1"] }}
                                    <a href="javascript:;" class="btn btn-primary CheckedConfirm" name="生产前的准备">确认</a>
                                {% endif %}
                            {% endif %}
                            {% if '84' == flag %}
                                {{ dir[0]["CheckedPeople_a1"] }}
                            {% endif %}
                        </td>
                    </tr>
                    <tr>
                        <td>是否清除工作区域、设备上的上一批次的物料或产品</td>
                        <td>
                            <label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label>
                        </td>
                    </tr>
                    <tr>
                        <td>检查是否已经清除上一批次物料的状态标志</td>
                        <td>
                            <label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label>
                        </td>
                    </tr>
                    <tr>
                        <td rowspan="3" style="vertical-align: bottom;text-align: center;"><input type="text" value="" id="endReadyDate" class="datetimepicker selectDateTime" readonly></td>
                        <td>检查生产设备、生产现场是否完好清洁</td>
                        <td>
                            <label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label>
                        </td>
                    </tr>
                    <tr>
                        <td>是否清除生产现场与本批产品无关的文件</td>
                        <td>
                            <label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label>
                        </td>
                    </tr>
                    <tr>
                        <td>检查设备、电器件、介质是否正常处于安全状态</td>
                        <td>
                            <label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2">QA对生产现场进行检查，合格后发放《生产许可证》</td>
                        <td>
                            <label class="checkbox-inline"><input type="checkbox" name="QAreadycheckbox"> 合格 / 不合格</label>
                        </td>
                        <td>QA确认人</td>
                        <td class="middle-center">
                            <input type="hidden" id="QAreadycheckbox" value={{ dir[0]["QAConfirmPeople_a1"] }}>
                            {% if '82' == flag %}
                                {{ dir[0]["QAConfirmPeople_a1"] }}
                            {% endif %}
                            {% if '83' == flag %}
                                {{ dir[0]["QAConfirmPeople_a1"] }}
                            {% endif %}
                            {% if '84' == flag %}
                                {% if None == dir[0]["OperationPeople_a1"] or None == dir[0]["CheckedPeople_a1"] or "" == dir[0]["OperationPeople_a1"] or "" == dir[0]["CheckedPeople_a1"] %}
                                {% else %}
                                    {{ dir[0]["QAConfirmPeople_a1"] }}
                                    <a href="javascript:;" class="btn btn-primary QAConfirm" name="生产前的准备">确认</a>
                                {% endif %}
                            {% endif %}
                        </td>
                    </tr>
                </tbody>
            </table>
            <!--洗润开始，操作按SOP执行-->
            <h4 class="text-center">洗润开始，操作按SOP执行</h4>
            <table class="table table-bordered">
                <tbody>
                    <tr>
                        <td>开始时间</td>
                        <td colspan="2"><input type="text" value="" class="form-control datetimepicker" readonly></td>
                        <td>操作人</td>
                        <td>复核人</td>
                    </tr>
                    <tr>
                        <td>参数控制</td>
                        <td>频率</td>
                        <td>是否符合要求</td>
                        <td rowspan="4" class="middle-center">
                            <input type="hidden" id="readycheckbox" value={{ dir[0]["OperationPeople_a1"] }}>
                            {% if '82' == flag %}
                                {{ dir[0]["OperationPeople_a1"] }}
                                <a href="javascript:;" class="btn btn-primary OperationConfirm" name="生产前的准备">确认</a>
                            {% endif %}
                            {% if '83' == flag %}
                                {{ dir[0]["OperationPeople_a1"] }}
                            {% endif %}
                            {% if '84' == flag %}
                                {{ dir[0]["OperationPeople_a1"] }}
                            {% endif %}
                        </td>
                        <td rowspan="4" class="middle-center">
                            {% if '82' == flag %}
                                {{ dir[0]["CheckedPeople_a1"] }}
                            {% endif %}
                            {% if '83' == flag %}
                                {% if None == dir[0]["OperationPeople_a1"] or "" == dir[0]["OperationPeople_a1"] %}
                                {% else %}
                                    {{ dir[0]["CheckedPeople_a1"] }}
                                    <a href="javascript:;" class="btn btn-primary CheckedConfirm" name="生产前的准备">确认</a>
                                {% endif %}
                            {% endif %}
                            {% if '84' == flag %}
                                {{ dir[0]["CheckedPeople_a1"] }}
                            {% endif %}
                        </td>
                    </tr>
                    <tr>
                        <td>喷射式清洁机的输送带运行频率：15~50Hz</td>
                        <td>
                            <div class="input-group">
                                <input type="text" class="form-control batchInput" id="">
                                <div class="input-group-addon">Hz</div>
                            </div>
                        </td>
                        <td><label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label></td>
                    </tr>
                    <tr>
                        <td>提升输送机的运行频率：15~50Hz</td>
                        <td>
                            <div class="input-group">
                                <input type="text" class="form-control batchInput" id="baggingOff1">
                                <div class="input-group-addon">Hz</div>
                            </div>
                        </td>
                        <td><label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label></td>
                    </tr>
                    <tr>
                        <td>结束时间</td>
                        <td><input type="text" value="" class="form-control datetimepicker" readonly></td>
                        <td><label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label></td>
                    </tr>
                    <tr>
                        <td colspan="2">肿节风可见本色，且洗药水无浑浊</td>
                        <td><label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label></td>
                        <td>QA确认人</td>
                        <td class="middle-center">
                            <input type="hidden" id="QAreadycheckbox" value={{ dir[0]["QAConfirmPeople_a1"] }}>
                            {% if '82' == flag %}
                                {{ dir[0]["QAConfirmPeople_a1"] }}
                            {% endif %}
                            {% if '83' == flag %}
                                {{ dir[0]["QAConfirmPeople_a1"] }}
                            {% endif %}
                            {% if '84' == flag %}
                                {% if None == dir[0]["OperationPeople_a1"] or None == dir[0]["CheckedPeople_a1"] or "" == dir[0]["OperationPeople_a1"] or "" == dir[0]["CheckedPeople_a1"] %}
                                {% else %}
                                    {{ dir[0]["QAConfirmPeople_a1"] }}
                                    <a href="javascript:;" class="btn btn-primary QAConfirm" name="生产前的准备">确认</a>
                                {% endif %}
                            {% endif %}
                        </td>
                    </tr>
                </tbody>
            </table>
            <!--洗润结束清场-->
            <h4 class="text-center">洗润结束清场</h4>
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th class="tdWidth100">时间</th>
                        <th>清场要求及内容</th>
                        <th><label class="checkbox-inline"><input type="checkbox" name="allovercheckbox" id="allovercheckbox"> 打√全选</label></th>
                        <th>操作人</th>
                        <th>复核人</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td rowspan="2" style="text-align: center"><input type="text" value="" id="startOverDate" class="datetimepicker selectDateTime" readonly></td>
                        <td>设备是否按照清洁SOP要求完成</td>
                        <td>
                            <label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label>
                        </td>
                        <td rowspan="4" class="middle-center">
                            <input type="hidden" id="overcheckbox" value={{ dir[0]["OperationPeople_a4"] }}>
                            {% if '82' == flag %}
                                {{ dir[0]["OperationPeople_a4"] }}
                                <a href="javascript:;" class="btn btn-primary OperationConfirm" name="备料结束清场">确认</a>
                            {% endif %}
                            {% if '83' == flag %}
                                {{ dir[0]["OperationPeople_a4"] }}
                            {% endif %}
                            {% if '84' == flag %}
                                {{ dir[0]["OperationPeople_a4"] }}
                            {% endif %}
                        </td>
                        <td rowspan="4" class="middle-center">
                            {% if '82' == flag %}
                                {{ dir[0]["CheckedPeople_a4"] }}
                            {% endif %}
                            {% if '83' == flag %}
                                {% if None == dir[0]["OperationPeople_a4"] or "" == dir[0]["OperationPeople_a4"] %}
                                {% else %}
                                    {{ dir[0]["CheckedPeople_a4"] }}
                                    <a href="javascript:;" class="btn btn-primary CheckedConfirm" name="备料结束清场">确认</a>
                                {% endif %}
                            {% endif %}
                            {% if '84' == flag %}
                                {{ dir[0]["CheckedPeople_a4"] }}
                            {% endif %}
                        </td>
                    </tr>
                    <tr>
                        <td>是否清除工作区域内本批物料、状态标志和生产用文件</td>
                        <td>
                            <label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label>
                        </td>
                    </tr>
                    <tr>
                        <td rowspan="2" style="vertical-align: bottom;text-align: center;"><input type="text" value="" id="endOverDate" class="datetimepicker selectDateTime" readonly></td>
                        <td>工作区域、工器具、洁具是否清洁并按定置摆放</td>
                        <td>
                            <label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label>
                        </td>
                    </tr>
                    <tr>
                        <td>是否按《清场管理规程》进行清场</td>
                        <td>
                            <label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2">QA对生产现场进行检查，合格后发放《清场合格证》</td>
                        <td>
                            <label class="checkbox-inline"><input type="checkbox" name="QAovercheckbox"> 合格 / 不合格</label>
                        </td>
                        <td>QA确认人</td>
                        <td class="middle-center">
                            <input type="hidden" id="QAovercheckbox" value={{ dir[0]["QAConfirmPeople_a4"] }}>
                            {% if '82' == flag %}
                                {{ dir[0]["QAConfirmPeople_a4"] }}
                            {% endif %}
                            {% if '83' == flag %}
                                {{ dir[0]["QAConfirmPeople_a4"] }}
                            {% endif %}
                            {% if '84' == flag %}
                                {% if None == dir[0]["OperationPeople_a4"] or None == dir[0]["CheckedPeople_a4"] or "" == dir[0]["OperationPeople_a4"] or "" == dir[0]["CheckedPeople_a4"] %}
                                {% else %}
                                    {{ dir[0]["QAConfirmPeople_a4"] }}
                                    <a href="javascript:;" class="btn btn-primary QAConfirm" name="备料结束清场">确认</a>
                                {% endif %}
                            {% endif %}
                        </td>
                    </tr>
                </tbody>
            </table>
            <!--洗润设备-->
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th>设备名称</th>
                        <th>设备型号</th>
                        <th>设备编号</th>
                        <th>设备运转情况</th>
                        <th>操作人</th>
                        <th>复核人</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="equipmentName">喷射式清洗机</td>
                        <td>PSJ-1000</td>
                        <td>22112</td>
                        <td>
                            <label class="checkbox-inline"><input type="checkbox" name="equipmentCheckbox" id="beiliaoEquipmentCheckbox1" > 正常 </label>
                            <label class="checkbox-inline"><input type="checkbox" name="equipmentCheckbox" id="beiliaoEquipmentUnCheckbox1"> 不正常 </label>
                        </td>
                        <td class="middle-center" rowspan="2">
                            <input type="hidden" id="equipmentCheckbox" value={{ dir[0]["OperationPeople_a5"] }}>
                            {% if '82' == flag %}
                                {{ dir[0]["OperationPeople_a5"] }}
                                <a href="javascript:;" class="btn btn-primary equipmentConfirm" name="操作人">确认</a>
                            {% endif %}
                            {% if '83' == flag %}
                                {{ dir[0]["OperationPeople_a5"] }}
                            {% endif %}
                            {% if '84' == flag %}
                                {{ dir[0]["OperationPeople_a5"] }}
                            {% endif %}
                        </td>
                        <td class="middle-center" rowspan="2">
                            {% if '82' == flag %}
                                {{ dir[0]["CheckedPeople_a5"] }}
                            {% endif %}
                            {% if '83' == flag %}
                                {% if None == dir[0]["OperationPeople_a5"] or "" == dir[0]["OperationPeople_a5"] %}
                                {% else %}
                                    {% if None == dir[0]["CheckedPeople_a5"] or "" == dir[0]["CheckedPeople_a5"] %}
                                        <a href="javascript:;" class="btn btn-primary equipmentConfirm" name="复核人">确认</a>
                                    {% else %}
                                        {{ dir[0]["CheckedPeople_a5"] }}
                                    {% endif %}
                                {% endif %}
                            {% endif %}
                            {% if '84' == flag %}
                                {{ dir[0]["CheckedPeople_a5"] }}
                            {% endif %}
                        </td>
                    </tr>
                    <tr>
                        <td class="equipmentName">提升输送机</td>
                        <td>TSJ-600</td>
                        <td>22091</td>
                        <td>
                            <label class="checkbox-inline"><input type="checkbox" name="equipmentCheckbox" id="beiliaoEquipmentCheckbox1" > 正常 </label>
                            <label class="checkbox-inline"><input type="checkbox" name="equipmentCheckbox" id="beiliaoEquipmentUnCheckbox1"> 不正常 </label>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="4">生产过程是否符合安全管理规定</td>
                        <td>
                            <label class="checkbox-inline"><input type="checkbox" name="equipmentCheckbox"> 是 / 否</label>
                        </td>
                    </tr>
                </tbody>
            </table>
        {% endif %}

        {% if session.get('title') == '切制' %}
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <td class="middle-center">工序</td>
                        <td class="middle-center" id="PName">{{ PName }}</td>
                        <td class="middle-center">产品批号</td>
                        <td class="middle-center" id="batchID">{{ BatchID }}</td>
                        <td class="middle-center">批量</td>
                        <td class="middle-center">{{ PlanQuantity }}kg</td>
                        <td class="middle-center">生产日期</td>
                        <td class="middle-center tdWidth250"><input type="text" class="batchInput datetimepicker" id="PNameProDate" readonly></td>
                    </tr>
                </thead>
            </table>
            <!--生产前的准备-->
            <h4 class="text-center">生产前的准备</h4>
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th class="tdWidth100">时间</th>
                        <th>准备工作要求及内容</th>
                        <th><label class="checkbox-inline"><input type="checkbox" name="allreadycheckbox" id="allreadycheckbox"> 打√全选</label></th>
                        <th>操作人</th>
                        <th>复核人</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td rowspan="3" style="text-align: center"><input type="text" value="" id="startReadyDate" class="datetimepicker selectDateTime" readonly></td>
                        <td>检查工作区域是否有《清场合格证》</td>
                        <td>
                            <label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label>
                        </td>
                        <td rowspan="6" class="middle-center">
                            <input type="hidden" id="readycheckbox" value={{ dir[0]["OperationPeople_a1"] }}>
                            {% if '82' == flag %}
                                {{ dir[0]["OperationPeople_a1"] }}
                                <a href="javascript:;" class="btn btn-primary OperationConfirm" name="生产前的准备">确认</a>
                            {% endif %}
                            {% if '83' == flag %}
                                {{ dir[0]["OperationPeople_a1"] }}
                            {% endif %}
                            {% if '84' == flag %}
                                {{ dir[0]["OperationPeople_a1"] }}
                            {% endif %}
                        </td>
                        <td rowspan="6" class="middle-center">
                            {% if '82' == flag %}
                                {{ dir[0]["CheckedPeople_a1"] }}
                            {% endif %}
                            {% if '83' == flag %}
                                {% if None == dir[0]["OperationPeople_a1"] or "" == dir[0]["OperationPeople_a1"] %}
                                {% else %}
                                    {{ dir[0]["CheckedPeople_a1"] }}
                                    <a href="javascript:;" class="btn btn-primary CheckedConfirm" name="生产前的准备">确认</a>
                                {% endif %}
                            {% endif %}
                            {% if '84' == flag %}
                                {{ dir[0]["CheckedPeople_a1"] }}
                            {% endif %}
                        </td>
                    </tr>
                    <tr>
                        <td>是否清除工作区域、设备上的上一批次的物料或产品</td>
                        <td>
                            <label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label>
                        </td>
                    </tr>
                    <tr>
                        <td>检查是否已经清除上一批次物料的状态标志</td>
                        <td>
                            <label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label>
                        </td>
                    </tr>
                    <tr>
                        <td rowspan="3" style="vertical-align: bottom;text-align: center;"><input type="text" value="" id="endReadyDate" class="datetimepicker selectDateTime" readonly></td>
                        <td>检查生产设备、生产现场是否完好清洁</td>
                        <td>
                            <label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label>
                        </td>
                    </tr>
                    <tr>
                        <td>是否清除生产现场与本批产品无关的文件</td>
                        <td>
                            <label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label>
                        </td>
                    </tr>
                    <tr>
                        <td>检查设备、电器件、介质是否正常处于安全状态</td>
                        <td>
                            <label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2">QA对生产现场进行检查，合格后发放《生产许可证》</td>
                        <td>
                            <label class="checkbox-inline"><input type="checkbox" name="QAreadycheckbox"> 合格 / 不合格</label>
                        </td>
                        <td>QA确认人</td>
                        <td class="middle-center">
                            <input type="hidden" id="QAreadycheckbox" value={{ dir[0]["QAConfirmPeople_a1"] }}>
                            {% if '82' == flag %}
                                {{ dir[0]["QAConfirmPeople_a1"] }}
                            {% endif %}
                            {% if '83' == flag %}
                                {{ dir[0]["QAConfirmPeople_a1"] }}
                            {% endif %}
                            {% if '84' == flag %}
                                {% if None == dir[0]["OperationPeople_a1"] or None == dir[0]["CheckedPeople_a1"] or "" == dir[0]["OperationPeople_a1"] or "" == dir[0]["CheckedPeople_a1"] %}
                                {% else %}
                                    {{ dir[0]["QAConfirmPeople_a1"] }}
                                    <a href="javascript:;" class="btn btn-primary QAConfirm" name="生产前的准备">确认</a>
                                {% endif %}
                            {% endif %}
                        </td>
                    </tr>
                </tbody>
            </table>
            <!--切制开始，操作按SOP执行-->
            <h4 class="text-center">切制开始，操作按SOP执行</h4>
            <table class="table table-bordered">
                <tbody>
                    <tr>
                        <td>开始时间</td>
                        <td colspan="2"><input type="text" value="" class="form-control datetimepicker" readonly></td>
                        <td>操作人</td>
                        <td>复核人</td>
                    </tr>
                    <tr>
                        <td>参数控制</td>
                        <td>转速</td>
                        <td>是否符合要求</td>
                        <td rowspan="3" class="middle-center">
                            <input type="hidden" id="readycheckbox" value={{ dir[0]["OperationPeople_a1"] }}>
                            {% if '82' == flag %}
                                {{ dir[0]["OperationPeople_a1"] }}
                                <a href="javascript:;" class="btn btn-primary OperationConfirm" name="生产前的准备">确认</a>
                            {% endif %}
                            {% if '83' == flag %}
                                {{ dir[0]["OperationPeople_a1"] }}
                            {% endif %}
                            {% if '84' == flag %}
                                {{ dir[0]["OperationPeople_a1"] }}
                            {% endif %}
                        </td>
                        <td rowspan="3" class="middle-center">
                            {% if '82' == flag %}
                                {{ dir[0]["CheckedPeople_a1"] }}
                            {% endif %}
                            {% if '83' == flag %}
                                {% if None == dir[0]["OperationPeople_a1"] or "" == dir[0]["OperationPeople_a1"] %}
                                {% else %}
                                    {{ dir[0]["CheckedPeople_a1"] }}
                                    <a href="javascript:;" class="btn btn-primary CheckedConfirm" name="生产前的准备">确认</a>
                                {% endif %}
                            {% endif %}
                            {% if '84' == flag %}
                                {{ dir[0]["CheckedPeople_a1"] }}
                            {% endif %}
                        </td>
                    </tr>
                    <tr>
                        <td>剁刀式切药机运行转速：600~1200r/min</td>
                        <td>
                            <div class="input-group">
                                <input type="text" class="form-control batchInput" id="baggingOff1">
                                <div class="input-group-addon">r/min</div>
                            </div>
                        </td>
                        <td colspan="2"><label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label></td>
                    </tr>
                    <tr>
                        <td>结束时间</td>
                        <td colspan="2"><input type="text" value="" class="form-control datetimepicker" readonly></td>
                    </tr>
                    <tr>
                        <td>切制的段长度≤8cm 比例不低于95%</td>
                        <td colspan="2"><label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label></td>
                        <td>QA确认人</td>
                        <td class="middle-center">
                            <input type="hidden" id="QAreadycheckbox" value={{ dir[0]["QAConfirmPeople_a1"] }}>
                            {% if '82' == flag %}
                                {{ dir[0]["QAConfirmPeople_a1"] }}
                            {% endif %}
                            {% if '83' == flag %}
                                {{ dir[0]["QAConfirmPeople_a1"] }}
                            {% endif %}
                            {% if '84' == flag %}
                                {% if None == dir[0]["OperationPeople_a1"] or None == dir[0]["CheckedPeople_a1"] or "" == dir[0]["OperationPeople_a1"] or "" == dir[0]["CheckedPeople_a1"] %}
                                {% else %}
                                    {{ dir[0]["QAConfirmPeople_a1"] }}
                                    <a href="javascript:;" class="btn btn-primary QAConfirm" name="生产前的准备">确认</a>
                                {% endif %}
                            {% endif %}
                        </td>
                    </tr>
                </tbody>
            </table>
            <!--切制结束清场-->
            <h4 class="text-center">切制结束清场</h4>
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th class="tdWidth100">时间</th>
                        <th>清场要求及内容</th>
                        <th><label class="checkbox-inline"><input type="checkbox" name="allovercheckbox" id="allovercheckbox"> 打√全选</label></th>
                        <th>操作人</th>
                        <th>复核人</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td rowspan="2" style="text-align: center"><input type="text" value="" id="startOverDate" class="datetimepicker selectDateTime" readonly></td>
                        <td>设备是否按照清洁SOP要求完成</td>
                        <td>
                            <label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label>
                        </td>
                        <td rowspan="4" class="middle-center">
                            <input type="hidden" id="overcheckbox" value={{ dir[0]["OperationPeople_a4"] }}>
                            {% if '82' == flag %}
                                {{ dir[0]["OperationPeople_a4"] }}
                                <a href="javascript:;" class="btn btn-primary OperationConfirm" name="备料结束清场">确认</a>
                            {% endif %}
                            {% if '83' == flag %}
                                {{ dir[0]["OperationPeople_a4"] }}
                            {% endif %}
                            {% if '84' == flag %}
                                {{ dir[0]["OperationPeople_a4"] }}
                            {% endif %}
                        </td>
                        <td rowspan="4" class="middle-center">
                            {% if '82' == flag %}
                                {{ dir[0]["CheckedPeople_a4"] }}
                            {% endif %}
                            {% if '83' == flag %}
                                {% if None == dir[0]["OperationPeople_a4"] or "" == dir[0]["OperationPeople_a4"] %}
                                {% else %}
                                    {{ dir[0]["CheckedPeople_a4"] }}
                                    <a href="javascript:;" class="btn btn-primary CheckedConfirm" name="备料结束清场">确认</a>
                                {% endif %}
                            {% endif %}
                            {% if '84' == flag %}
                                {{ dir[0]["CheckedPeople_a4"] }}
                            {% endif %}
                        </td>
                    </tr>
                    <tr>
                        <td>是否清除工作区域内本批物料、状态标志和生产用文件</td>
                        <td>
                            <label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label>
                        </td>
                    </tr>
                    <tr>
                        <td rowspan="2" style="vertical-align: bottom;text-align: center;"><input type="text" value="" id="endOverDate" class="datetimepicker selectDateTime" readonly></td>
                        <td>工作区域、工器具、洁具是否清洁并按定置摆放</td>
                        <td>
                            <label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label>
                        </td>
                    </tr>
                    <tr>
                        <td>是否按《清场管理规程》进行清场</td>
                        <td>
                            <label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2">QA对生产现场进行检查，合格后发放《清场合格证》</td>
                        <td>
                            <label class="checkbox-inline"><input type="checkbox" name="QAovercheckbox"> 合格 / 不合格</label>
                        </td>
                        <td>QA确认人</td>
                        <td class="middle-center">
                            <input type="hidden" id="QAovercheckbox" value={{ dir[0]["QAConfirmPeople_a4"] }}>
                            {% if '82' == flag %}
                                {{ dir[0]["QAConfirmPeople_a4"] }}
                            {% endif %}
                            {% if '83' == flag %}
                                {{ dir[0]["QAConfirmPeople_a4"] }}
                            {% endif %}
                            {% if '84' == flag %}
                                {% if None == dir[0]["OperationPeople_a4"] or None == dir[0]["CheckedPeople_a4"] or "" == dir[0]["OperationPeople_a4"] or "" == dir[0]["CheckedPeople_a4"] %}
                                {% else %}
                                    {{ dir[0]["QAConfirmPeople_a4"] }}
                                    <a href="javascript:;" class="btn btn-primary QAConfirm" name="备料结束清场">确认</a>
                                {% endif %}
                            {% endif %}
                        </td>
                    </tr>
                </tbody>
            </table>
            <!--切制设备-->
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th>设备名称</th>
                        <th>设备型号</th>
                        <th>设备编号</th>
                        <th>设备运转情况</th>
                        <th>操作人</th>
                        <th>复核人</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="equipmentName">剁刀式切药机</td>
                        <td>QJBC-300B</td>
                        <td>22115</td>
                        <td>
                            <label class="checkbox-inline"><input type="checkbox" name="equipmentCheckbox" id="beiliaoEquipmentCheckbox1" > 正常 </label>
                            <label class="checkbox-inline"><input type="checkbox" name="equipmentCheckbox" id="beiliaoEquipmentUnCheckbox1"> 不正常 </label>
                        </td>
                        <td class="middle-center">
                            <input type="hidden" id="equipmentCheckbox" value={{ dir[0]["OperationPeople_a5"] }}>
                            {% if '82' == flag %}
                                {{ dir[0]["OperationPeople_a5"] }}
                                <a href="javascript:;" class="btn btn-primary equipmentConfirm" name="操作人">确认</a>
                            {% endif %}
                            {% if '83' == flag %}
                                {{ dir[0]["OperationPeople_a5"] }}
                            {% endif %}
                            {% if '84' == flag %}
                                {{ dir[0]["OperationPeople_a5"] }}
                            {% endif %}
                        </td>
                        <td class="middle-center">
                            {% if '82' == flag %}
                                {{ dir[0]["CheckedPeople_a5"] }}
                            {% endif %}
                            {% if '83' == flag %}
                                {% if None == dir[0]["OperationPeople_a5"] or "" == dir[0]["OperationPeople_a5"] %}
                                {% else %}
                                    {% if None == dir[0]["CheckedPeople_a5"] or "" == dir[0]["CheckedPeople_a5"] %}
                                        <a href="javascript:;" class="btn btn-primary equipmentConfirm" name="复核人">确认</a>
                                    {% else %}
                                        {{ dir[0]["CheckedPeople_a5"] }}
                                    {% endif %}
                                {% endif %}
                            {% endif %}
                            {% if '84' == flag %}
                                {{ dir[0]["CheckedPeople_a5"] }}
                            {% endif %}
                        </td>
                    </tr>
                    <tr>
                        <td colspan="4">生产过程是否符合安全管理规定</td>
                        <td colspan="2">
                            <label class="checkbox-inline"><input type="checkbox" name="equipmentCheckbox"> 是 / 否</label>
                        </td>
                    </tr>
                </tbody>
            </table>
        {% endif %}

        {% if session.get('title') == '烘干' %}
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <td class="middle-center">工序</td>
                        <td class="middle-center" id="PName">{{ PName }}</td>
                        <td class="middle-center">产品批号</td>
                        <td class="middle-center" id="batchID">{{ BatchID }}</td>
                        <td class="middle-center">批量</td>
                        <td class="middle-center">{{ PlanQuantity }}kg</td>
                        <td class="middle-center">生产日期</td>
                        <td class="middle-center tdWidth250"><input type="text" class="batchInput datetimepicker" id="PNameProDate" readonly></td>
                    </tr>
                </thead>
            </table>
            <!--生产前的准备-->
            <h4 class="text-center">生产前的准备</h4>
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th class="tdWidth100">时间</th>
                        <th>准备工作要求及内容</th>
                        <th><label class="checkbox-inline"><input type="checkbox" name="allreadycheckbox" id="allreadycheckbox"> 打√全选</label></th>
                        <th>操作人</th>
                        <th>复核人</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td rowspan="3" style="text-align: center"><input type="text" value="" id="startReadyDate" class="datetimepicker selectDateTime" readonly></td>
                        <td>检查工作区域是否有《清场合格证》</td>
                        <td>
                            <label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label>
                        </td>
                        <td rowspan="6" class="middle-center">
                            <input type="hidden" id="readycheckbox" value={{ dir[0]["OperationPeople_a1"] }}>
                            {% if '82' == flag %}
                                {{ dir[0]["OperationPeople_a1"] }}
                                <a href="javascript:;" class="btn btn-primary OperationConfirm" name="生产前的准备">确认</a>
                            {% endif %}
                            {% if '83' == flag %}
                                {{ dir[0]["OperationPeople_a1"] }}
                            {% endif %}
                            {% if '84' == flag %}
                                {{ dir[0]["OperationPeople_a1"] }}
                            {% endif %}
                        </td>
                        <td rowspan="6" class="middle-center">
                            {% if '82' == flag %}
                                {{ dir[0]["CheckedPeople_a1"] }}
                            {% endif %}
                            {% if '83' == flag %}
                                {% if None == dir[0]["OperationPeople_a1"] or "" == dir[0]["OperationPeople_a1"] %}
                                {% else %}
                                    {{ dir[0]["CheckedPeople_a1"] }}
                                    <a href="javascript:;" class="btn btn-primary CheckedConfirm" name="生产前的准备">确认</a>
                                {% endif %}
                            {% endif %}
                            {% if '84' == flag %}
                                {{ dir[0]["CheckedPeople_a1"] }}
                            {% endif %}
                        </td>
                    </tr>
                    <tr>
                        <td>是否清除工作区域、设备上的上一批次的物料或产品</td>
                        <td>
                            <label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label>
                        </td>
                    </tr>
                    <tr>
                        <td>检查是否已经清除上一批次物料的状态标志</td>
                        <td>
                            <label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label>
                        </td>
                    </tr>
                    <tr>
                        <td rowspan="3" style="vertical-align: bottom;text-align: center;"><input type="text" value="" id="endReadyDate" class="datetimepicker selectDateTime" readonly></td>
                        <td>检查生产设备、生产现场是否完好清洁</td>
                        <td>
                            <label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label>
                        </td>
                    </tr>
                    <tr>
                        <td>是否清除生产现场与本批产品无关的文件</td>
                        <td>
                            <label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label>
                        </td>
                    </tr>
                    <tr>
                        <td>检查设备、电器件、介质是否正常处于安全状态</td>
                        <td>
                            <label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2">QA对生产现场进行检查，合格后发放《生产许可证》</td>
                        <td>
                            <label class="checkbox-inline"><input type="checkbox" name="QAreadycheckbox"> 合格 / 不合格</label>
                        </td>
                        <td>QA确认人</td>
                        <td class="middle-center">
                            <input type="hidden" id="QAreadycheckbox" value={{ dir[0]["QAConfirmPeople_a1"] }}>
                            {% if '82' == flag %}
                                {{ dir[0]["QAConfirmPeople_a1"] }}
                            {% endif %}
                            {% if '83' == flag %}
                                {{ dir[0]["QAConfirmPeople_a1"] }}
                            {% endif %}
                            {% if '84' == flag %}
                                {% if None == dir[0]["OperationPeople_a1"] or None == dir[0]["CheckedPeople_a1"] or "" == dir[0]["OperationPeople_a1"] or "" == dir[0]["CheckedPeople_a1"] %}
                                {% else %}
                                    {{ dir[0]["QAConfirmPeople_a1"] }}
                                    <a href="javascript:;" class="btn btn-primary QAConfirm" name="生产前的准备">确认</a>
                                {% endif %}
                            {% endif %}
                        </td>
                    </tr>
                </tbody>
            </table>
            <!--烘干开始，操作按SOP执行-->
            <h4 class="text-center">烘干开始，操作按SOP执行</h4>
            <table class="table table-bordered">
                <tbody>
                    <tr>
                        <td>开始时间</td>
                        <td colspan="8"><input type="text" value="" class="form-control datetimepicker" readonly></td>
                        <td>操作人</td>
                        <td>复核人</td>
                    </tr>
                    <tr>
                        <td colspan="9">参数控制</td>
                        <td rowspan="30" class="middle-center">
                            <input type="hidden" id="readycheckbox" value={{ dir[0]["OperationPeople_a1"] }}>
                            {% if '82' == flag %}
                                {{ dir[0]["OperationPeople_a1"] }}
                                <a href="javascript:;" class="btn btn-primary OperationConfirm" name="生产前的准备">确认</a>
                            {% endif %}
                            {% if '83' == flag %}
                                {{ dir[0]["OperationPeople_a1"] }}
                            {% endif %}
                            {% if '84' == flag %}
                                {{ dir[0]["OperationPeople_a1"] }}
                            {% endif %}
                        </td>
                        <td rowspan="30" class="middle-center">
                            {% if '82' == flag %}
                                {{ dir[0]["CheckedPeople_a1"] }}
                            {% endif %}
                            {% if '83' == flag %}
                                {% if None == dir[0]["OperationPeople_a1"] or "" == dir[0]["OperationPeople_a1"] %}
                                {% else %}
                                    {{ dir[0]["CheckedPeople_a1"] }}
                                    <a href="javascript:;" class="btn btn-primary CheckedConfirm" name="生产前的准备">确认</a>
                                {% endif %}
                            {% endif %}
                            {% if '84' == flag %}
                                {{ dir[0]["CheckedPeople_a1"] }}
                            {% endif %}
                        </td>
                    </tr>
                    <tr>
                        <td rowspan="24">烘干温度：50~90°C 每60分钟至少记录1次实时参数值</td>
                        <td colspan="2">1段</td>
                        <td colspan="2">2段</td>
                        <td colspan="2">3段</td>
                        <td colspan="2">4段</td>
                    </tr>
                    <tr>
                        <td>时间</td>
                        <td>温度</td>
                        <td>时间</td>
                        <td>温度</td>
                        <td>时间</td>
                        <td>温度</td>
                        <td>时间</td>
                        <td>温度</td>
                    </tr>
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td colspan="2">5段</td>
                        <td colspan="2">6段</td>
                        <td colspan="2">7段</td>
                        <td colspan="2"></td>
                    </tr>
                    <tr>
                        <td>时间</td>
                        <td>温度</td>
                        <td>时间</td>
                        <td>温度</td>
                        <td>时间</td>
                        <td>温度</td>
                        <td rowspan="11"></td>
                        <td rowspan="11"></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td colspan="6">主要设备参数控制</td>
                        <td colspan="3">是否符合要求</td>
                    </tr>
                    <tr>
                        <td colspan="3">提升输送机运行频率：15~50Hz</td>
                        <td colspan="3">
                            <div class="input-group">
                                <input type="text" class="form-control batchInput" id="baggingOff1">
                                <div class="input-group-addon">Hz</div>
                            </div>
                        </td>
                        <td colspan="3"><label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label></td>
                    </tr>
                    <tr>
                        <td rowspan="3">带式干燥机</td>
                        <td colspan="2">传动运行频率：15~50Hz</td>
                        <td colspan="3">
                            <div class="input-group">
                                <input type="text" class="form-control batchInput" id="baggingOff1">
                                <div class="input-group-addon">Hz</div>
                            </div>
                        </td>
                        <td colspan="3"><label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label></td>
                    </tr>
                    <tr>
                        <td colspan="2">传动启动温度≥50°C</td>
                        <td colspan="3">
                            <div class="input-group">
                                <input type="text" class="form-control batchInput" id="baggingOff1">
                                <div class="input-group-addon">°C</div>
                            </div>
                        </td>
                        <td colspan="3"><label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label></td>
                    </tr>
                    <tr>
                        <td colspan="2">排湿启动温度≥50°C</td>
                        <td colspan="3">
                            <div class="input-group">
                                <input type="text" class="form-control batchInput" id="baggingOff1">
                                <div class="input-group-addon">°C</div>
                            </div>
                        </td>
                        <td colspan="3"><label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label></td>
                    </tr>
                    <tr>
                        <td colspan="3">结束时间</td>
                        <td colspan="6"><input type="text" class="batchInput datetimepicker" id="" readonly></td>
                        <td>QA确认人</td>
                        <td class="middle-center">
                            <input type="hidden" id="QAreadycheckbox" value={{ dir[0]["QAConfirmPeople_a1"] }}>
                            {% if '82' == flag %}
                                {{ dir[0]["QAConfirmPeople_a1"] }}
                            {% endif %}
                            {% if '83' == flag %}
                                {{ dir[0]["QAConfirmPeople_a1"] }}
                            {% endif %}
                            {% if '84' == flag %}
                                {% if None == dir[0]["OperationPeople_a1"] or None == dir[0]["CheckedPeople_a1"] or "" == dir[0]["OperationPeople_a1"] or "" == dir[0]["CheckedPeople_a1"] %}
                                {% else %}
                                    {{ dir[0]["QAConfirmPeople_a1"] }}
                                    <a href="javascript:;" class="btn btn-primary QAConfirm" name="生产前的准备">确认</a>
                                {% endif %}
                            {% endif %}
                        </td>
                    </tr>
                </tbody>
            </table>
            <h4 class="text-center">质量控制</h4>
            <table class="table table-bordered">
                <tbody>
                    <tr>
                        <td>形状：本品为不规则段、叶多破碎的药材</td>
                        <td>水分≤15.0%</td>
                        <td rowspan="2">QA确认人</td>
                        <td rowspan="2" class="middle-center">
                            <input type="hidden" id="QAreadycheckbox" value={{ dir[0]["QAConfirmPeople_a1"] }}>
                            {% if '82' == flag %}
                                {{ dir[0]["QAConfirmPeople_a1"] }}
                            {% endif %}
                            {% if '83' == flag %}
                                {{ dir[0]["QAConfirmPeople_a1"] }}
                            {% endif %}
                            {% if '84' == flag %}
                                {% if None == dir[0]["OperationPeople_a1"] or None == dir[0]["CheckedPeople_a1"] or "" == dir[0]["OperationPeople_a1"] or "" == dir[0]["CheckedPeople_a1"] %}
                                {% else %}
                                    {{ dir[0]["QAConfirmPeople_a1"] }}
                                    <a href="javascript:;" class="btn btn-primary QAConfirm" name="生产前的准备">确认</a>
                                {% endif %}
                            {% endif %}
                        </td>
                    </tr>
                    <tr>
                        <td><label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label></td>
                        <td><input type="text" class="form-control batchInput" id=""></td>
                    </tr>
                </tbody>
            </table>
            <!--烘干结束清场-->
            <h4 class="text-center">烘干结束清场</h4>
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th class="tdWidth100">时间</th>
                        <th>清场要求及内容</th>
                        <th><label class="checkbox-inline"><input type="checkbox" name="allovercheckbox" id="allovercheckbox"> 打√全选</label></th>
                        <th>操作人</th>
                        <th>复核人</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td rowspan="2" style="text-align: center"><input type="text" value="" id="startOverDate" class="datetimepicker selectDateTime" readonly></td>
                        <td>设备是否按照清洁SOP要求完成</td>
                        <td>
                            <label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label>
                        </td>
                        <td rowspan="4" class="middle-center">
                            <input type="hidden" id="overcheckbox" value={{ dir[0]["OperationPeople_a4"] }}>
                            {% if '82' == flag %}
                                {{ dir[0]["OperationPeople_a4"] }}
                                <a href="javascript:;" class="btn btn-primary OperationConfirm" name="备料结束清场">确认</a>
                            {% endif %}
                            {% if '83' == flag %}
                                {{ dir[0]["OperationPeople_a4"] }}
                            {% endif %}
                            {% if '84' == flag %}
                                {{ dir[0]["OperationPeople_a4"] }}
                            {% endif %}
                        </td>
                        <td rowspan="4" class="middle-center">
                            {% if '82' == flag %}
                                {{ dir[0]["CheckedPeople_a4"] }}
                            {% endif %}
                            {% if '83' == flag %}
                                {% if None == dir[0]["OperationPeople_a4"] or "" == dir[0]["OperationPeople_a4"] %}
                                {% else %}
                                    {{ dir[0]["CheckedPeople_a4"] }}
                                    <a href="javascript:;" class="btn btn-primary CheckedConfirm" name="备料结束清场">确认</a>
                                {% endif %}
                            {% endif %}
                            {% if '84' == flag %}
                                {{ dir[0]["CheckedPeople_a4"] }}
                            {% endif %}
                        </td>
                    </tr>
                    <tr>
                        <td>是否清除工作区域内本批物料、状态标志和生产用文件</td>
                        <td>
                            <label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label>
                        </td>
                    </tr>
                    <tr>
                        <td rowspan="2" style="vertical-align: bottom;text-align: center;"><input type="text" value="" id="endOverDate" class="datetimepicker selectDateTime" readonly></td>
                        <td>工作区域、工器具、洁具是否清洁并按定置摆放</td>
                        <td>
                            <label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label>
                        </td>
                    </tr>
                    <tr>
                        <td>是否按《清场管理规程》进行清场</td>
                        <td>
                            <label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2">QA对生产现场进行检查，合格后发放《清场合格证》</td>
                        <td>
                            <label class="checkbox-inline"><input type="checkbox" name="QAovercheckbox"> 合格 / 不合格</label>
                        </td>
                        <td>QA确认人</td>
                        <td class="middle-center">
                            <input type="hidden" id="QAovercheckbox" value={{ dir[0]["QAConfirmPeople_a4"] }}>
                            {% if '82' == flag %}
                                {{ dir[0]["QAConfirmPeople_a4"] }}
                            {% endif %}
                            {% if '83' == flag %}
                                {{ dir[0]["QAConfirmPeople_a4"] }}
                            {% endif %}
                            {% if '84' == flag %}
                                {% if None == dir[0]["OperationPeople_a4"] or None == dir[0]["CheckedPeople_a4"] or "" == dir[0]["OperationPeople_a4"] or "" == dir[0]["CheckedPeople_a4"] %}
                                {% else %}
                                    {{ dir[0]["QAConfirmPeople_a4"] }}
                                    <a href="javascript:;" class="btn btn-primary QAConfirm" name="备料结束清场">确认</a>
                                {% endif %}
                            {% endif %}
                        </td>
                    </tr>
                </tbody>
            </table>
            <!--烘干设备-->
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th>设备名称</th>
                        <th>设备编号</th>
                        <th>设备运转情况</th>
                        <th>操作人</th>
                        <th>复核人</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="equipmentName">均匀布料器</td>
                        <td>22117</td>
                        <td>
                            <label class="checkbox-inline"><input type="checkbox" name="equipmentCheckbox" id="beiliaoEquipmentCheckbox1" > 正常 </label>
                            <label class="checkbox-inline"><input type="checkbox" name="equipmentCheckbox" id="beiliaoEquipmentUnCheckbox1"> 不正常 </label>
                        </td>
                        <td class="middle-center" rowspan="3">
                            <input type="hidden" id="equipmentCheckbox" value={{ dir[0]["OperationPeople_a5"] }}>
                            {% if '82' == flag %}
                                {{ dir[0]["OperationPeople_a5"] }}
                                <a href="javascript:;" class="btn btn-primary equipmentConfirm" name="操作人">确认</a>
                            {% endif %}
                            {% if '83' == flag %}
                                {{ dir[0]["OperationPeople_a5"] }}
                            {% endif %}
                            {% if '84' == flag %}
                                {{ dir[0]["OperationPeople_a5"] }}
                            {% endif %}
                        </td>
                        <td class="middle-center" rowspan="3">
                            {% if '82' == flag %}
                                {{ dir[0]["CheckedPeople_a5"] }}
                            {% endif %}
                            {% if '83' == flag %}
                                {% if None == dir[0]["OperationPeople_a5"] or "" == dir[0]["OperationPeople_a5"] %}
                                {% else %}
                                    {% if None == dir[0]["CheckedPeople_a5"] or "" == dir[0]["CheckedPeople_a5"] %}
                                        <a href="javascript:;" class="btn btn-primary equipmentConfirm" name="复核人">确认</a>
                                    {% else %}
                                        {{ dir[0]["CheckedPeople_a5"] }}
                                    {% endif %}
                                {% endif %}
                            {% endif %}
                            {% if '84' == flag %}
                                {{ dir[0]["CheckedPeople_a5"] }}
                            {% endif %}
                        </td>
                    </tr>
                    <tr>
                        <td class="equipmentName">提升输送机</td>
                        <td>22161</td>
                        <td>
                            <label class="checkbox-inline"><input type="checkbox" name="equipmentCheckbox" id="beiliaoEquipmentCheckbox1" > 正常 </label>
                            <label class="checkbox-inline"><input type="checkbox" name="equipmentCheckbox" id="beiliaoEquipmentUnCheckbox1"> 不正常 </label>
                        </td>
                    </tr>
                    <tr>
                        <td class="equipmentName">带式干燥机</td>
                        <td>22118</td>
                        <td>
                            <label class="checkbox-inline"><input type="checkbox" name="equipmentCheckbox" id="beiliaoEquipmentCheckbox1" > 正常 </label>
                            <label class="checkbox-inline"><input type="checkbox" name="equipmentCheckbox" id="beiliaoEquipmentUnCheckbox1"> 不正常 </label>
                        </td>
                    </tr>
                </tbody>
            </table>
            <h4 class="text-center">物料平衡计算</h4>
            <table class="table table-bordered">
                <tbody>
                    <tr>
                        <td>
                            <div class="input-group">
                                <div class="input-group-addon">肿节风药材重量A=</div>
                                <input type="text" class="form-control batchInput" id="baggingOff1">
                                <div class="input-group-addon">kg</div>
                            </div>
                        </td>
                        <td>
                            <div class="input-group">
                                <div class="input-group-addon">净肿节风重量B=</div>
                                <input type="text" class="form-control batchInput" id="baggingOff1">
                                <div class="input-group-addon">kg</div>
                            </div>
                        </td>
                        <td>
                            <div class="input-group">
                                <div class="input-group-addon">取样量C=</div>
                                <input type="text" class="form-control batchInput" id="baggingOff1">
                                <div class="input-group-addon">kg</div>
                            </div>
                        </td>
                        <td>
                            <div class="input-group">
                                <div class="input-group-addon">损耗量D=</div>
                                <input type="text" class="form-control batchInput" id="baggingOff1">
                                <div class="input-group-addon">kg</div>
                            </div>
                        </td>
                        <td>统计人</td>
                        <td>复核人</td>
                    </tr>
                    <tr>
                        <td colspan="4">
                            <div class="input-group">
                                <div class="input-group-addon">得率（≥80%）= （B+C）/A×100%=</div>
                                <input type="text" class="form-control batchInput" id="baggingOff1">
                                <div class="input-group-addon">%</div>
                            </div>
                        </td>
                        <td class="middle-center">
                            <input type="hidden" id="equipmentCheckbox" value={{ dir[0]["OperationPeople_a5"] }}>
                            {% if '82' == flag %}
                                {{ dir[0]["OperationPeople_a5"] }}
                                <a href="javascript:;" class="btn btn-primary equipmentConfirm" name="操作人">确认</a>
                            {% endif %}
                            {% if '83' == flag %}
                                {{ dir[0]["OperationPeople_a5"] }}
                            {% endif %}
                            {% if '84' == flag %}
                                {{ dir[0]["OperationPeople_a5"] }}
                            {% endif %}
                        </td>
                        <td class="middle-center">
                            {% if '82' == flag %}
                                {{ dir[0]["CheckedPeople_a5"] }}
                            {% endif %}
                            {% if '83' == flag %}
                                {% if None == dir[0]["OperationPeople_a5"] or "" == dir[0]["OperationPeople_a5"] %}
                                {% else %}
                                    {% if None == dir[0]["CheckedPeople_a5"] or "" == dir[0]["CheckedPeople_a5"] %}
                                        <a href="javascript:;" class="btn btn-primary equipmentConfirm" name="复核人">确认</a>
                                    {% else %}
                                        {{ dir[0]["CheckedPeople_a5"] }}
                                    {% endif %}
                                {% endif %}
                            {% endif %}
                            {% if '84' == flag %}
                                {{ dir[0]["CheckedPeople_a5"] }}
                            {% endif %}
                        </td>
                    </tr>
                    <tr>
                        <td colspan="4">生产过程是否符合安全管理规定</td>
                        <td colspan="2"><label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label></td>
                    </tr>
                </tbody>
            </table>
        {% endif %}
    </div>

	<link rel="stylesheet" href="../static/custom/uimaker/easyui.css">
    <script type="text/javascript" src="../static/js/jquery.easyui.min.js"></script>
    <script type="text/javascript" src="../static/js/html2canvas.js"></script>
    <script type="text/javascript" src="../static/js/jsPdf.debug.js"></script>
    <script>
        $(function(){
            $("#loadingModal").modal('show');
            //数据采集
            $.ajax({
                url: '/electionBatchSearch',
                method: 'GET',
                data: {
                    batchID: $("#batchID").html(),
                    PName: getUrlParam('title') + "段",
                    BrandID:"1"
                },
                success: function (response) {
                    $("#loadingModal").modal('hide');
                    response = JSON.parse(response)
                    for(var key in response){
                        adddata(key,response[key])
                    }
                },
                error: function () {
                    alert("请求数据失败，请稍后重试！")
                }
            });
            //表单数据插入
            $.ajax({
                url: 'allUnitDataMutual',
                method: 'GET',
                data: {
                    PUID: getUrlParam("title"),
                    BatchID: $("#batchID").html(),
                    BrandID:getUrlParam('BrandID')
                },
                beforeSend:function(){
                    $("#loadingModal").modal("show");
                },
                success: function (response) {
                    response = JSON.parse(response)
                    for(var key in response){
                        addInputData(key,response[key])
                    }
                },
                error: function () {
                    alert("请求失败，请稍后重试！")
                }
            });
            //根据key匹配id  加入数据
            function adddata(ids,res){
                $("#" + ids).html(res)
            }
            //根据复选框值判断选中状态
            function addInputData(ids,res){
                $("#" + ids).val(res)
                $("input[name=FilterCheckbox]").each(function(){
                    if($(this).val() == 'false'){
                        $(this).prop("checked",false)
                    }else if($(this).val() == 'true'){
                        $(this).prop("checked",true)
                    }
                })
                $("input[name=equipmentCheckbox]").each(function(){
                    if($(this).val() == 1){
                        $(this).prop("checked",true)
                    }else if($(this).val() == 2){
                        $(this).prop("indeterminate",true)
                    }else if($(this).val() == 3){
                        $(this).prop("checked",false)
                    }
                })
            }

            //操作人确认请求方法，制药计划管理页面里已有的确认，包括生产前的准备，开始，结束清场
            function OperationConfirmFun(ID,title,name){
                $("#loadingModal").modal('show');
                $.ajax({
                    url: '/ZYPlanGuid/operateConfirm',
                    method: 'POST',
                    data: {
                        ID: ID,
                        PName:title,
                        PUName:name
                    },
                    success: function (data) {
                        $("#loadingModal").modal('hide');
                        if (data == "OK") {
                            $.messager.show({
                                title: '提示',
                                timeout: 1000,
                                msg: '操作成功！',
                                style: {
                                    right: '',
                                    top: document.body.scrollTop + document.documentElement.scrollTop,
                                    bottom: ''
                                }
                            });
                            window.location.reload();
                        }else{
                            $.messager.alert('提示', data, 'info');
                        }
                    },
                    error: function () {
                        alert("请求失败，请稍后重试！")
                    }
                });
            }
            //复核人确认请求方法，制药计划管理页面里已有的确认，包括生产前的准备，开始，结束清场
            function CheckedConfirmFun(ID,title,name){
                $("#loadingModal").modal('show');
                $.ajax({
                    url: '/ZYPlanGuid/checkedConfirm',
                    method: 'POST',
                    data: {
                        ID: ID,
                        PName:title,
                        PUName:name
                    },
                    success: function (data) {
                        $("#loadingModal").modal('hide');
                        if (data == "OK") {
                            $.messager.show({
                                title: '提示',
                                timeout: 1000,
                                msg: '复核成功！',
                                style: {
                                    right: '',
                                    top: document.body.scrollTop + document.documentElement.scrollTop,
                                    bottom: ''
                                }
                            });
                            window.location.reload();
                        }else{
                            $.messager.alert('提示', data, 'info');
                        }
                    },
                    error: function () {
                        alert("请求失败，请稍后重试！")
                    }
                });
            }
            //QA确认请求方法，制药计划管理页面里已有的确认，包括生产前的准备，开始，结束清场
            function QAConfirmFun(ID,title,name){
                $("#loadingModal").modal('show');
                $.ajax({
                    url: '/ZYPlanGuid/QAautograph',
                    method: 'POST',
                    data: {
                        ID: ID,
                        PName: title,
                        PUName: name
                    },
                    success: function (data) {
                        $("#loadingModal").modal('hide');
                        if (data == "OK") {
                            $.messager.show({
                                title: '提示',
                                timeout: 1000,
                                msg: '确认成功！',
                                style: {
                                    right: '',
                                    top: document.body.scrollTop + document.documentElement.scrollTop,
                                    bottom: ''
                                }
                            });
                            window.location.reload();
                        } else {
                            $.messager.alert('提示', data, 'info');
                        }
                    },
                    error: function () {
                        alert("请求失败，请稍后重试！")
                    }
                });
            }
            //额外确认内容请求方法，包括质量控制，参数控制，领取物料等。。
            function elseConfirmFun(PUID,BatchID,type,confirm){
                $("#loadingModal").modal('show');
                $.ajax({
                    url: '/addNewReadyWork',
                    method: 'POST',
                    data: {
                        PUID: PUID,
                        BatchID: BatchID,
                        BrandID:getUrlParam('BrandID'),
                        type:type,
                        confirm: confirm
                    },
                    success: function (data) {
                        $("#loadingModal").modal('hide');
                        if (data == "OK") {
                            $.messager.show({
                                title: '提示',
                                timeout: 1000,
                                msg: '操作成功！',
                                style: {
                                    right: '',
                                    top: document.body.scrollTop + document.documentElement.scrollTop,
                                    bottom: ''
                                }
                            });
                            window.location.reload();
                        }else{
                            $.messager.alert('提示', data, 'info');
                        }
                    },
                    error: function () {
                        alert("请求失败，请稍后重试！")
                    }
                });
            }
            //操作人确认
            $(".OperationConfirm").on('click',function(){
                var ID = getUrlParam('ID'),
                    title = getUrlParam('title'),
                    name = $(this).attr("name"),
                    PUID = $("#PUID").val(),
                    BatchID = $("#batchID").html(),
                    type = $(this).attr("name"),
                    confirm = $(this).attr("rel")
                if(name == "生产前的准备"){
                    $.messager.confirm('确定操作', '是否要进行确认？确认后您无法撤回和修改时间，请认真检查。', function (flag) {
                        if(flag) {
                            var number = ""
                            $("input:checkbox[name=readycheckbox]:checked").each(function(k){
                                number = k
                            })
                            if(number == 5){
                                OperationConfirmFun(ID,title,name)
                            }else{
                                $.messager.alert('提示', "完成当前所有的准备工作才可以做确认操作", 'info');
                            }
                        }
                    })
                }else if(name == "备料结束清场" || name == "煎煮结束清场" || name == "浓缩结束清场" || name == "喷雾干燥结束清场" || name == "收粉结束清场"){
                    $.messager.confirm('确定操作', '是否要进行确认？确认后您无法撤回和修改时间，请认真检查。', function (flag) {
                        if(flag) {
                            var number = ""
                            $("input:checkbox[name=overcheckbox]:checked").each(function(k){
                                number = k
                            })
                            if(number == 4){
                                OperationConfirmFun(ID,title,name)
                            }else{
                                $.messager.alert('提示', "完成当前所有的清场工作才可以做确认操作", 'info');
                            }
                        }
                    })
                }else if(name == "32"){ //领取物料操作人确认
                    $.messager.confirm('确定操作', '是否要进行确认？确认后您无法撤回，请认真检查。', function (flag) {
                        if(flag) {
                            if($("#BLFilterCheckbox1").prop("checked") == true){
                                elseConfirmFun(PUID,BatchID,type,confirm)
                            }else{
                                $.messager.alert('提示', "物料复核无误才可以做确认操作", 'info');
                            }
                        }
                    })
                }else if(name == "42"){ //静置结束清场操作人确认
                    $.messager.confirm('确定操作', '是否要进行确认？确认后您无法撤回和修改时间，请认真检查。', function (flag) {
                        if(flag) {
                            var number = ""
                            $("input:checkbox[name=stewingOvercheckbox]:checked").each(function(k){
                                number = k
                            })
                            if(number == 4){
                                elseConfirmFun(PUID,BatchID,type,confirm)
                            }else{
                                $.messager.alert('提示', "完成当前所有的清场工作才可以做确认操作", 'info');
                            }
                        }
                    })
                }else if(name == "45" || name == "46" || name == "54" || name == "48" || name == "52" || name == "50" || name == "51"){
                    $.messager.confirm('确定操作', '是否要进行确认？确认后您无法撤回，请认真检查。', function (flag) {
                        if(flag) {
                            elseConfirmFun(PUID,BatchID,type,confirm)
                        }
                    })
                }else{
                    $.messager.confirm('确定操作', '是否要进行确认？确认后不允许撤回。', function (flag) {
                        if(flag) {
                            OperationConfirmFun(ID,title,name)
                        }
                    })
                }
            })
            //复核人确认
            $(".CheckedConfirm").on('click',function(){
                var ID = getUrlParam('ID'),
                    title = getUrlParam('title'),
                    name = $(this).attr("name"),
                    PUID = $("#PUID").val(),
                    BatchID = $("#batchID").html(),
                    type = $(this).attr("name"),
                    confirm = $(this).attr("rel")
                if(name == "32" || name == "42" || name == "45" || name == "46" || name == "48" || name == "50" || name == "51") {
                    $.messager.confirm('确定操作', '是否要进行确认？确认后您无法撤回，请认真检查。', function (flag) {
                        if(flag) {
                            elseConfirmFun(PUID,BatchID,type,confirm)
                        }
                    })
                }else{
                    $.messager.confirm('确定操作', '是否要进行确认？确认后不允许撤回。', function (flag) {
                        if (flag) {
                            CheckedConfirmFun(ID, title, name)
                        }
                    })
                }
            })
            //QA确认
            $(".QAConfirm").on('click',function(){
                var ID = getUrlParam('ID'),
                    title = getUrlParam('title'),
                    name = $(this).attr("name"),
                    PUID = $("#PUID").val(),
                    BatchID = $("#batchID").html(),
                    type = $(this).attr("name"),
                    confirm = $(this).attr("rel")
                if(name == "生产前的准备") {
                    $.messager.confirm('确定操作', '是否要进行确认？确认后不允许撤回。', function (flag) {
                        if (flag) {
                            if(title == "收粉"){
                                var number = ""
                                $("input:checkbox[name=QAreadycheckbox]:checked").each(function(k){
                                    number = k
                                })
                                if(number == 1){
                                    QAConfirmFun(ID,title,name)
                                }else{
                                    $.messager.alert('提示', "全部检查无误才可以做确认操作", 'info');
                                }
                            }else {
                                if($("input:checkbox[name=QAreadycheckbox]").prop("checked") == true){
                                    QAConfirmFun(ID, title, name)
                                }else{
                                    $.messager.alert('提示', "当前的准备工作检查合格才可以做确认操作", 'info');
                                }
                            }
                        }
                    })
                }else if(name == "42"){
                    $.messager.confirm('确定操作', '是否要进行确认？确认后不允许撤回。', function (flag) {
                        if (flag) {
                            if($("input:checkbox[name=QAstewingOvercheckbox]").prop("checked") == true){
                                elseConfirmFun(PUID,BatchID,type,confirm)
                            }else{
                                $.messager.alert('提示', "当前的清场工作检查合格才可以做确认操作", 'info');
                            }
                        }
                    })
                }else if(name == "备料结束清场" || name == "煎煮结束清场" || name == "浓缩结束清场" || name == "喷雾干燥结束清场" || name == "收粉结束清场"){
                    $.messager.confirm('确定操作', '是否要进行确认？确认后不允许撤回。', function (flag) {
                        if (flag) {
                            if($("input:checkbox[name=QAovercheckbox]").prop("checked") == true){
                                QAConfirmFun(ID, title, name)
                            }else{
                                $.messager.alert('提示', "当前的清场工作检查合格才可以做确认操作", 'info');
                            }
                        }
                    })
                }else if(name == "45" || name == "46" || name == "54" || name == "52"){
                    $.messager.confirm('确定操作', '是否要进行确认？确认后不允许撤回。', function (flag) {
                        if (flag) {
                            elseConfirmFun(PUID,BatchID,type,confirm)
                        }
                    })
                }else{
                    $.messager.confirm('确定操作', '是否要进行确认？确认后不允许撤回。', function (flag) {
                        if (flag) {
                            QAConfirmFun(ID, title, name)
                        }
                    })
                }
            })

            //设备确认请求方法
            function equipmentConfirmFun(PUID,BatchID,confirm){
                $.ajax({
                    url: '/addEquipmentWork',
                    method: 'POST',
                    data: {
                        PUID: PUID,
                        BatchID: BatchID,
                        BrandID:getUrlParam('BrandID'),
                        confirm: confirm
                    },
                    success: function (data) {
                        if (data == "OK") {
                            $.messager.show({
                                title: '提示',
                                timeout: 1000,
                                msg: '确认成功！',
                                style: {
                                    right: '',
                                    top: document.body.scrollTop + document.documentElement.scrollTop,
                                    bottom: ''
                                }
                            });
                            window.location.reload();
                        } else {
                            $.messager.alert('提示', data, 'info');
                        }
                    },
                    error: function () {
                        alert("请求失败，请稍后重试！")
                    }
                });
            }
            //设备确认
            $(".equipmentConfirm").on('click',function(){
                var PUID = $("#PUID").val(),
                    BatchID = $("#batchID").html(),
                    confirm = $(this).attr("name")
                var checkboxChecked = $("input[name=equipmentCheckbox]").length //复选框数量
                $.messager.confirm('确定操作', '是否要进行确认？确认后不允许撤回。', function (flag) {
                    if (flag) {
                        {#if(confirm == "操作人"){#}
                        {#    var number = ""#}
                        {#    $("input:checkbox[name=equipmentCheckbox]:checked").each(function(k){#}
                        {#        number = k#}
                        {#    })#}
                        {#    if(number == checkboxChecked - 1){ //判断是否全部选中设备#}
                        {#        equipmentConfirmFun(PUID,BatchID,confirm)#}
                        {#    }else{#}
                        {#        $.messager.alert('提示', "当前所有的设备正常才可以做确认操作", 'info');#}
                        {#    }#}
                        {# }else{#}
                            equipmentConfirmFun(PUID,BatchID,confirm)
                        //}
                    }
                })
            })
            //导出PDF
            $("#renderPdf").on('click',function(){
                var pdfMain = $("#pdfMain")
                html2canvas(pdfMain, {
                  onrendered:function(canvas) {
                      var contentWidth = canvas.width;
                      var contentHeight = canvas.height;
                      //一页pdf显示html页面生成的canvas高度;
                      var pageHeight = contentWidth / 595.28 * 841.89;
                      //未生成pdf的html页面高度
                      var leftHeight = contentHeight;
                      //pdf页面偏移
                      var position = 0;
                      //a4纸的尺寸[595.28,841.89]，html页面生成的canvas在pdf中图片的宽高
                      var imgWidth = 555.28;
                      var imgHeight = 555.28/contentWidth * contentHeight;
                      var pageData = canvas.toDataURL('image/jpeg', 1.0);
                      var pdf = new jsPDF('', 'pt', 'a4');
                      //有两个高度需要区分，一个是html页面的实际高度，和生成pdf的页面高度(841.89)
                      //当内容未超过pdf一页显示的范围，无需分页
                      if (leftHeight < pageHeight) {
                          pdf.addImage(pageData, 'JPEG', 20, 0, imgWidth, imgHeight );
                      } else {
                          while(leftHeight > 0) {
                              pdf.addImage(pageData, 'JPEG', 20, position, imgWidth, imgHeight)
                              leftHeight -= pageHeight;
                              position -= 841.89;
                              //避免添加空白页
                              if(leftHeight > 0) {
                                  pdf.addPage();
                              }
                          }
                      }
                      pdf.save($("#batchID").html() + $("#PName").html() +'.pdf');
                  }
              })
            })
            //保存输入的表单信息
            $("#save").on('click',function(){
                var PUID = getUrlParam("title"),
                    batchID = $("#batchID").html()
                $.ajax({
                    url: 'allUnitDataMutual',
                    method: 'POST',
                    data: {
                        PUID: PUID,
                        BatchID: batchID,
                        BrandID:getUrlParam('BrandID'),
                        PNameProDate:$("#PNameProDate").val(),
                        startReadyDate:$("#startReadyDate").val(),
                        endReadyDate:$("#endReadyDate").val(),
                        startOverDate:$("#startOverDate").val(),
                        endOverDate:$("#endOverDate").val(),

                        TXFilterCheckbox1:$("#TXFilterCheckbox1").prop("checked"),
                        TXFilterCheckbox2:$("#TXFilterCheckbox2").prop("checked"),
                        TXFilterCheckbox3:$("#TXFilterCheckbox3").prop("checked"),
                        TXFilterCheckbox4:$("#TXFilterCheckbox4").prop("checked"),

                        TXBLBatchid:$("#TXBLBatchid").val(),
                        TXBLOdd:$("#TXBLOdd").val(),
                        TXBLNum:$("#TXBLNum").val(),
                        TXBLStartDate:$("#TXBLStartDate").val(),
                        TXBLEndDate:$("#TXBLEndDate").val(),

                        TXEquipmentCheckbox1:$("#TXEquipmentCheckbox1").val(),
                        TXEquipmentUnCheckbox1:$("#TXEquipmentUnCheckbox1").val(),
                    },
                    beforeSend:function(){
                        $("#loadingModal").modal('show');
                    },
                    success: function (data) {
                        $("#loadingModal").modal('hide');
                        if (data == "OK") {
                            window.location.reload();
                        } else {
                            $.messager.alert('提示', data, 'info');
                        }
                    },
                    error: function () {
                        alert("请求失败，请稍后重试！")
                    }
                });
            })
        })
        //获取页面传参
        function getUrlParam(name) {
            var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
            var r = decodeURI(window.location.search).substr(1).match(reg); //匹配目标参数
            if (r != null) return unescape(r[2]); return null; //返回参数值
        }
    </script>
</body>
</html>
